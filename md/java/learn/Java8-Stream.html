<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java 8 - Stream | 私人知识图书馆</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="包含: Java 基础, Java 部分源码, JVM, Spring, Spring Boot, Spring Cloud, 数据库原理, MySQL, ElasticSearch, MongoDB, Docker, k8s, CI&amp;CD, Linux, DevOps, 分布式, 中间件, 开发工具, Git, IDE, 源码阅读，读书笔记, 开源项目...">
    <meta name="robots" content="all">
    <meta name="author" content="pdai">
    <meta name="keywords" content="私人知识图书馆, java体系, java知识体系, java框架,java详解,java学习路线,java spring, java面试, 知识体系, java技术体系, java编程, java编程指南,java开发体系, java开发,java教程,java,java数据结构, 算法, 开发基础">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.cb877f3d.css" as="style"><link rel="preload" href="/assets/js/app.1f563e48.js" as="script"><link rel="preload" href="/assets/js/3.53f669bd.js" as="script"><link rel="preload" href="/assets/js/19.f113b0b6.js" as="script"><link rel="prefetch" href="/assets/js/10.676c5100.js"><link rel="prefetch" href="/assets/js/11.9df653b2.js"><link rel="prefetch" href="/assets/js/12.b17e6356.js"><link rel="prefetch" href="/assets/js/13.ed90e22e.js"><link rel="prefetch" href="/assets/js/14.61f9cd6f.js"><link rel="prefetch" href="/assets/js/15.ac0ef010.js"><link rel="prefetch" href="/assets/js/16.3e29f439.js"><link rel="prefetch" href="/assets/js/17.90c09287.js"><link rel="prefetch" href="/assets/js/18.5e9ee40a.js"><link rel="prefetch" href="/assets/js/2.a4f6f631.js"><link rel="prefetch" href="/assets/js/20.708a3e23.js"><link rel="prefetch" href="/assets/js/21.3a0dc559.js"><link rel="prefetch" href="/assets/js/22.72642347.js"><link rel="prefetch" href="/assets/js/4.498eb10c.js"><link rel="prefetch" href="/assets/js/5.ee589329.js"><link rel="prefetch" href="/assets/js/6.4e969a30.js"><link rel="prefetch" href="/assets/js/7.1153cd27.js"><link rel="prefetch" href="/assets/js/8.cb8ac540.js"><link rel="prefetch" href="/assets/js/9.5e517e4f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cb877f3d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.ico" alt="私人知识图书馆" class="logo"> <span class="site-name can-hide">私人知识图书馆</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  概述
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习笔记" class="mobile-dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/learn-typescript.html" class="nav-link">
  Typescript
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/ChromeExtensions.html" class="nav-link">
  ChromeExtensions
</a></li></ul></li><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Stream.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Stream
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Optional.html" class="nav-link">
  Optional
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Spring笔记.html" class="nav-link">
  Spring笔记
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Spring-MVC笔记.html" class="nav-link">
  SpringMVC笔记
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Mybatis笔记.html" class="nav-link">
  Mybatis笔记
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Maven学习笔记.html" class="nav-link">
  Maven学习笔记
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-zookeeper.html" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-redis.html" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-elasticstack.html" class="nav-link">
  Elasticstack
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Dubbo学习笔记.html" class="nav-link">
  Dubbo学习笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具|部署" class="dropdown-title"><span class="title">工具|部署</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具|部署" class="mobile-dropdown-title"><span class="title">工具|部署</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/tool/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/md/java/tool/gittool.html" class="nav-link">
  Gitee
</a></li></ul></div></div><div class="nav-item"><a href="/md/about/about-me.html" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/amzpiper" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  概述
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习笔记" class="mobile-dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/learn-typescript.html" class="nav-link">
  Typescript
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/ChromeExtensions.html" class="nav-link">
  ChromeExtensions
</a></li></ul></li><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Stream.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Stream
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Optional.html" class="nav-link">
  Optional
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Spring笔记.html" class="nav-link">
  Spring笔记
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Spring-MVC笔记.html" class="nav-link">
  SpringMVC笔记
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Mybatis笔记.html" class="nav-link">
  Mybatis笔记
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Maven学习笔记.html" class="nav-link">
  Maven学习笔记
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-zookeeper.html" class="nav-link">
  Zookeeper
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-redis.html" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-elasticstack.html" class="nav-link">
  Elasticstack
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Dubbo学习笔记.html" class="nav-link">
  Dubbo学习笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具|部署" class="dropdown-title"><span class="title">工具|部署</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具|部署" class="mobile-dropdown-title"><span class="title">工具|部署</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/tool/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/md/java/tool/gittool.html" class="nav-link">
  Gitee
</a></li></ul></div></div><div class="nav-item"><a href="/md/about/about-me.html" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/amzpiper" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/learn-typescript.html" class="sidebar-link">TypeScript</a></li><li><a href="/md/java/learn/ChromeExtensions.html" class="sidebar-link">Chrome Extensions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/Java8-Stream.html" aria-current="page" class="active sidebar-link">Java 8 - Stream</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/Java8-Stream.html#_1-那么什么是stream" class="sidebar-link">1. 那么什么是Stream</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/Java8-Stream.html#_2-stream的创建" class="sidebar-link">2. Stream的创建</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/Java8-Stream.html#_3-案例使用的员工类" class="sidebar-link">3. 案例使用的员工类</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/Java8-Stream.html#_3-1-遍历-匹配-foreach-find-match" class="sidebar-link">3.1 遍历/匹配（foreach/find/match）</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/Java8-Stream.html#_3-2-筛选-filter" class="sidebar-link">3.2 筛选（filter）</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/Java8-Stream.html#_3-3-聚合-max-min-count" class="sidebar-link">3.3 聚合（max/min/count)</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/Java8-Stream.html#_3-4-映射-map-flatmap" class="sidebar-link">3.4 映射(map/flatMap)</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/Java8-Stream.html#_3-5-归约-reduce" class="sidebar-link">3.5 归约(reduce)</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/Java8-Stream.html#_3-6-收集-collect" class="sidebar-link">3.6 收集(collect)</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/Java8-Stream.html#_3-7-排序-sorted" class="sidebar-link">3.7 排序(sorted)</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/Java8-Stream.html#_3-8-提取-组合" class="sidebar-link">3.8 提取/组合</a></li></ul></li><li><a href="/md/java/learn/Java8-Optional.html" class="sidebar-link">Java 8 - Optional</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/Spring笔记.html" class="sidebar-link">Spring</a></li><li><a href="/md/java/learn/Spring-MVC笔记.html" class="sidebar-link">SpringMVC</a></li><li><a href="/md/java/learn/Mybatis笔记.html" class="sidebar-link">Mybatis</a></li><li><a href="/md/java/learn/Maven学习笔记.html" class="sidebar-link">Maven</a></li><li><a href="/md/java/learn/learn-zookeeper.html" class="sidebar-link">Zookeeper</a></li><li><a href="/md/java/learn/learn-redis.html" class="sidebar-link">Redis</a></li><li><a href="/md/java/learn/learn-elasticstack.html" class="sidebar-link">Elasticstack</a></li><li><a href="/md/java/learn/Dubbo学习笔记.html" class="sidebar-link">Dubbo</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="java-8-stream"><a href="#java-8-stream" class="header-anchor">#</a> Java 8 - Stream</h1> <p>blog.csdn.net/mu_wind/article/details/109516995</p> <p><a href="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxLfiaDrpVicXB9IRHibwib8ahP8StxILIwao9J1nG13d1E76ZNaB3domqiaw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer">https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxLfiaDrpVicXB9IRHibwib8ahP8StxILIwao9J1nG13d1E76ZNaB3domqiaw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>先贴上几个案例，水平高超的同学可以挑战一下：</p> <ol><li>从员工集合中筛选出salary大于8000的员工，并放置到新的集合里。</li> <li>统计员工的最高薪资、平均薪资、薪资之和。</li> <li>将员工按薪资从高到低排序，同样薪资者年龄小者在前。</li> <li>将员工按性别分类，将员工按性别和地区分类，将员工按薪资是否高于8000分为两部分。</li></ol> <p>用传统的迭代处理也不是很难，但代码就显得冗余了，跟Stream相比高下立判。Java 8 是一个非常成功的版本，这个版本新增的<code>Stream</code>，配合同版本出现的 <code>Lambda</code> ，给我们操作集合（Collection）提供了极大的便利。</p> <h2 id="_1-那么什么是stream"><a href="#_1-那么什么是stream" class="header-anchor">#</a> 1. <strong>那么什么是Stream</strong></h2> <p><code>Stream</code>将要处理的元素集合看作一种流，在流的过程中，借助<code>Stream API</code>对流中的元素进行操作，比如：筛选、排序、聚合等。</p> <p><code>Stream</code>可以由数组或集合创建，对流的操作分为两种：</p> <ol><li>中间操作，每次返回一个新的流，可以有多个。</li> <li>终端操作，每个流只能进行一次终端操作，终端操作结束后流无法再次使用。终端操作会产生一个新的集合或值。</li></ol> <p>另外，<code>Stream</code>有几个特性：</p> <ol><li>stream不存储数据，而是按照特定的规则对数据进行计算，一般会输出结果。</li> <li>stream不会改变数据源，通常情况下会产生一个新的集合或一个值。</li> <li>stream具有延迟执行特性，只有调用终端操作时，中间操作才会执行。</li></ol> <h2 id="_2-stream的创建"><a href="#_2-stream的创建" class="header-anchor">#</a> <strong>2. Stream的创建</strong></h2> <p><code>Stream</code>可以通过集合数组创建。</p> <p>1、通过 <code>java.util.Collection.stream()</code> 方法用集合创建流</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>List&lt;String&gt; list = Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);
// 创建一个顺序流
Stream&lt;String&gt; stream = list.stream();
// 创建一个并行流
Stream&lt;String&gt; parallelStream = list.parallelStream();

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>2、使用<code>java.util.Arrays.stream(T[] array)</code>方法用数组创建流</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>int[] array={1,3,5,6,8};
IntStream stream = Arrays.stream(array);

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>3、使用<code>Stream</code>的静态方法：<code>of()、iterate()、generate()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Stream&lt;Integer&gt; stream = Stream.of(1, 2, 3, 4, 5, 6);

Stream&lt;Integer&gt; stream2 = Stream.iterate(0, (x) -&gt; x + 3).limit(4);
stream2.forEach(System.out::println);

Stream&lt;Double&gt; stream3 = Stream.generate(Math::random).limit(3);
stream3.forEach(System.out::println);

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>输出结果：</p> <blockquote><p>0 3 6 9 0.6796156909271994 0.1914314208854283 0.8116932592396652</p></blockquote> <p><strong><code>stream</code>和<code>parallelStream</code>的简单区分：</strong> <code>stream</code>是顺序流，由主线程按顺序对流执行操作，而<code>parallelStream</code>是并行流，内部以多线程并行执行的方式对流进行操作，但前提是流中的数据处理没有顺序要求。例如筛选集合中的奇数，两者的处理不同之处：</p> <p><a href="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxv7ia3b9wP4mZicicEp4YFdA7oHkaA8Uj4RLGo4xkhj5ypiaVYHM9pjXKpA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer">https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxv7ia3b9wP4mZicicEp4YFdA7oHkaA8Uj4RLGo4xkhj5ypiaVYHM9pjXKpA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>如果流中的数据量足够大，并行流可以加快处速度。除了直接创建并行流，还可以通过<code>parallel()</code>把顺序流转换成并行流：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Optional&lt;Integer&gt; findFirst = list.stream().parallel().filter(x-&gt;x&gt;6).findFirst();

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在使用stream之前，先理解一个概念：<code>Optional</code> 。</p> <blockquote><p>Optional类是一个可以为null的容器对象。如果值存在则isPresent()方法会返回true，调用get()方法会返回该对象。更详细说明请见：菜鸟教程Java 8 Optional类</p></blockquote> <p><strong>接下来，大批代码向你袭来！我将用20个案例将Stream的使用整得明明白白，只要跟着敲一遍代码，就能很好地掌握。</strong></p> <p><a href="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==">data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==</a></p> <h2 id="_3-案例使用的员工类"><a href="#_3-案例使用的员工类" class="header-anchor">#</a> <strong>3. 案例使用的员工类</strong></h2> <p>这是后面案例中使用的员工类：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>List&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();
personList.add(new Person(&quot;Tom&quot;, 8900, &quot;male&quot;, &quot;New York&quot;));
personList.add(new Person(&quot;Jack&quot;, 7000, &quot;male&quot;, &quot;Washington&quot;));
personList.add(new Person(&quot;Lily&quot;, 7800, &quot;female&quot;, &quot;Washington&quot;));
personList.add(new Person(&quot;Anni&quot;, 8200, &quot;female&quot;, &quot;New York&quot;));
personList.add(new Person(&quot;Owen&quot;, 9500, &quot;male&quot;, &quot;New York&quot;));
personList.add(new Person(&quot;Alisa&quot;, 7900, &quot;female&quot;, &quot;New York&quot;));

class Person {
  private String name;// 姓名
  private int salary;// 薪资
  private int age;// 年龄
  private String sex;//性别
  private String area;// 地区

// 构造方法
  public Person(String name, int salary, int age,String sex,String area) {
    this.name = name;
    this.salary = salary;
    this.age = age;
    this.sex = sex;
    this.area = area;
  }
// 省略了get和set，请自行添加

}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="_3-1-遍历-匹配-foreach-find-match"><a href="#_3-1-遍历-匹配-foreach-find-match" class="header-anchor">#</a> <em><strong>3.1 遍历/匹配（foreach/find/match）</strong></em></h2> <p><code>Stream</code>也是支持类似集合的遍历和匹配元素的，只是<code>Stream</code>中的元素是以<code>Optional</code>类型存在的。<code>Stream</code>的遍历、匹配非常简单。</p> <p><a href="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==">data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==</a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// import已省略，请自行添加，后面代码亦是

public class StreamTest {
  public static void main(String[] args) {
        List&lt;Integer&gt; list = Arrays.asList(7, 6, 9, 3, 8, 2, 1);

// 遍历输出符合条件的元素
        list.stream().filter(x -&gt; x &gt; 6).forEach(System.out::println);
// 匹配第一个
        Optional&lt;Integer&gt; findFirst = list.stream().filter(x -&gt; x &gt; 6).findFirst();
// 匹配任意（适用于并行流）
        Optional&lt;Integer&gt; findAny = list.parallelStream().filter(x -&gt; x &gt; 6).findAny();
// 是否包含符合特定条件的元素
        boolean anyMatch = list.stream().anyMatch(x -&gt; x &lt; 6);
        System.out.println(&quot;匹配第一个值：&quot; + findFirst.get());
        System.out.println(&quot;匹配任意一个值：&quot; + findAny.get());
        System.out.println(&quot;是否存在大于6的值：&quot; + anyMatch);
    }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_3-2-筛选-filter"><a href="#_3-2-筛选-filter" class="header-anchor">#</a> <em><strong>3.2 筛选（filter）</strong></em></h2> <p>筛选，是按照一定的规则校验流中的元素，将符合条件的元素提取到新的流中的操作。</p> <p><a href="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==">data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==</a></p> <h3 id="案例一-筛选出integer集合中大于7的元素-并打印出来"><a href="#案例一-筛选出integer集合中大于7的元素-并打印出来" class="header-anchor">#</a> <strong><strong>案例一：筛选出<code>Integer</code>集合中大于7的元素，并打印出来</strong></strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Integer&gt; list = Arrays.asList(6, 7, 3, 8, 1, 2, 9);
    Stream&lt;Integer&gt; stream = list.stream();
    stream.filter(x -&gt; x &gt; 7).forEach(System.out::println);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>预期结果：</p> <blockquote><p>8 9</p></blockquote> <h3 id="案例二-筛选员工中工资高于8000的人-并形成新的集合。形成新集合依赖collect-收集-后文有详细介绍。"><a href="#案例二-筛选员工中工资高于8000的人-并形成新的集合。形成新集合依赖collect-收集-后文有详细介绍。" class="header-anchor">#</a> <strong><strong>案例二：筛选员工中工资高于8000的人，并形成新的集合。形成新集合依赖<code>collect</code>（收集），后文有详细介绍。</strong></strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();
    personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Anni&quot;, 8200, 24, &quot;female&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Owen&quot;, 9500, 25, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Alisa&quot;, 7900, 26, &quot;female&quot;, &quot;New York&quot;));

    List&lt;String&gt; fiterList = personList.stream().filter(x -&gt; x.getSalary() &gt; 8000).map(Person::getName)
        .collect(Collectors.toList());
    System.out.print(&quot;高于8000的员工姓名：&quot; + fiterList);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>运行结果：</p> <blockquote><p>高于8000的员工姓名：[Tom, Anni, Owen]</p></blockquote> <h2 id="_3-3-聚合-max-min-count"><a href="#_3-3-聚合-max-min-count" class="header-anchor">#</a> <em><strong>3.3 聚合（max/min/count)</strong></em></h2> <p><code>max</code>、<code>min</code>、<code>count</code>这些字眼你一定不陌生，没错，在mysql中我们常用它们进行数据统计。Java stream中也引入了这些概念和用法，极大地方便了我们对集合、数组的数据统计工作。</p> <p><a href="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==">data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==</a></p> <h3 id="案例一-获取string集合中最长的元素。"><a href="#案例一-获取string集合中最长的元素。" class="header-anchor">#</a> <strong><strong>案例一：获取<code>String</code>集合中最长的元素。</strong></strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;String&gt; list = Arrays.asList(&quot;adnm&quot;, &quot;admmt&quot;, &quot;pot&quot;, &quot;xbangd&quot;, &quot;weoujgsd&quot;);

    Optional&lt;String&gt; max = list.stream().max(Comparator.comparing(String::length));
    System.out.println(&quot;最长的字符串：&quot; + max.get());
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>输出结果：</p> <blockquote><p>最长的字符串：weoujgsd</p></blockquote> <h3 id="案例二-获取integer集合中的最大值。"><a href="#案例二-获取integer集合中的最大值。" class="header-anchor">#</a> <strong><strong>案例二：获取<code>Integer</code>集合中的最大值。</strong></strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Integer&gt; list = Arrays.asList(7, 6, 9, 4, 11, 6);

// 自然排序
    Optional&lt;Integer&gt; max = list.stream().max(Integer::compareTo);
// 自定义排序
    Optional&lt;Integer&gt; max2 = list.stream().max(new Comparator&lt;Integer&gt;() {
      @Override
      public int compare(Integer o1, Integer o2) {
        return o1.compareTo(o2);
      }
    });
    System.out.println(&quot;自然排序的最大值：&quot; + max.get());
    System.out.println(&quot;自定义排序的最大值：&quot; + max2.get());
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>输出结果：</p> <blockquote><p>自然排序的最大值：11 自定义排序的最大值：11</p></blockquote> <h3 id="案例三-获取员工工资最高的人。"><a href="#案例三-获取员工工资最高的人。" class="header-anchor">#</a> <strong><strong>案例三：获取员工工资最高的人。</strong></strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();
    personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Anni&quot;, 8200, 24, &quot;female&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Owen&quot;, 9500, 25, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Alisa&quot;, 7900, 26, &quot;female&quot;, &quot;New York&quot;));

    Optional&lt;Person&gt; max = personList.stream().max(Comparator.comparingInt(Person::getSalary));
    System.out.println(&quot;员工工资最大值：&quot; + max.get().getSalary());
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>输出结果：</p> <blockquote><p>员工工资最大值：9500</p></blockquote> <h3 id="案例四-计算integer集合中大于6的元素的个数。"><a href="#案例四-计算integer集合中大于6的元素的个数。" class="header-anchor">#</a> <strong><strong>案例四：计算<code>Integer</code>集合中大于6的元素的个数。</strong></strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>import java.util.Arrays;
import java.util.List;

public class StreamTest {
  public static void main(String[] args) {
    List&lt;Integer&gt; list = Arrays.asList(7, 6, 4, 8, 2, 11, 9);

    long count = list.stream().filter(x -&gt; x &gt; 6).count();
    System.out.println(&quot;list中大于6的元素个数：&quot; + count);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>输出结果：</p> <blockquote><p>list中大于6的元素个数：4</p></blockquote> <h2 id="_3-4-映射-map-flatmap"><a href="#_3-4-映射-map-flatmap" class="header-anchor">#</a> <em><strong>3.4 映射(map/flatMap)</strong></em></h2> <p>映射，可以将一个流的元素按照一定的映射规则映射到另一个流中。分为<code>map</code>和<code>flatMap</code>：</p> <ul><li><code>map</code>：接收一个函数作为参数，该函数会被应用到每个元素上，并将其映射成一个新的元素。</li> <li><code>flatMap</code>：接收一个函数作为参数，将流中的每个值都换成另一个流，然后把所有流连接成一个流。</li></ul> <p><a href="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==">data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==</a></p> <p><a href="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==">data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==</a></p> <h3 id="案例一-英文字符串数组的元素全部改为大写。整数数组每个元素-3。"><a href="#案例一-英文字符串数组的元素全部改为大写。整数数组每个元素-3。" class="header-anchor">#</a> <strong><strong>案例一：英文字符串数组的元素全部改为大写。整数数组每个元素+3。</strong></strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    String[] strArr = { &quot;abcd&quot;, &quot;bcdd&quot;, &quot;defde&quot;, &quot;fTr&quot; };
    List&lt;String&gt; strList = Arrays.stream(strArr).map(String::toUpperCase).collect(Collectors.toList());

    List&lt;Integer&gt; intList = Arrays.asList(1, 3, 5, 7, 9, 11);
    List&lt;Integer&gt; intListNew = intList.stream().map(x -&gt; x + 3).collect(Collectors.toList());

    System.out.println(&quot;每个元素大写：&quot; + strList);
    System.out.println(&quot;每个元素+3：&quot; + intListNew);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>输出结果：</p> <blockquote><p>每个元素大写：[ABCD, BCDD, DEFDE, FTR] 每个元素+3：[4, 6, 8, 10, 12, 14]</p></blockquote> <h3 id="案例二-将员工的薪资全部增加1000。"><a href="#案例二-将员工的薪资全部增加1000。" class="header-anchor">#</a> <strong><strong>案例二：将员工的薪资全部增加1000。</strong></strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();
    personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Anni&quot;, 8200, 24, &quot;female&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Owen&quot;, 9500, 25, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Alisa&quot;, 7900, 26, &quot;female&quot;, &quot;New York&quot;));

// 不改变原来员工集合的方式
    List&lt;Person&gt; personListNew = personList.stream().map(person -&gt; {
      Person personNew = new Person(person.getName(), 0, 0, null, null);
      personNew.setSalary(person.getSalary() + 10000);
      return personNew;
    }).collect(Collectors.toList());
    System.out.println(&quot;一次改动前：&quot; + personList.get(0).getName() + &quot;--&gt;&quot; + personList.get(0).getSalary());
    System.out.println(&quot;一次改动后：&quot; + personListNew.get(0).getName() + &quot;--&gt;&quot; + personListNew.get(0).getSalary());

// 改变原来员工集合的方式
    List&lt;Person&gt; personListNew2 = personList.stream().map(person -&gt; {
      person.setSalary(person.getSalary() + 10000);
      return person;
    }).collect(Collectors.toList());
    System.out.println(&quot;二次改动前：&quot; + personList.get(0).getName() + &quot;--&gt;&quot; + personListNew.get(0).getSalary());
    System.out.println(&quot;二次改动后：&quot; + personListNew2.get(0).getName() + &quot;--&gt;&quot; + personListNew.get(0).getSalary());
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>输出结果：</p> <blockquote><p>一次改动前：Tom–&gt;8900 一次改动后：Tom–&gt;18900 二次改动前：Tom–&gt;18900 二次改动后：Tom–&gt;18900</p></blockquote> <h3 id="案例三-将两个字符数组合并成一个新的字符数组。"><a href="#案例三-将两个字符数组合并成一个新的字符数组。" class="header-anchor">#</a> <strong><strong>案例三：将两个字符数组合并成一个新的字符数组。</strong></strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;String&gt; list = Arrays.asList(&quot;m,k,l,a&quot;, &quot;1,3,5,7&quot;);
    List&lt;String&gt; listNew = list.stream().flatMap(s -&gt; {
// 将每个元素转换成一个stream
      String[] split = s.split(&quot;,&quot;);
      Stream&lt;String&gt; s2 = Arrays.stream(split);
      return s2;
    }).collect(Collectors.toList());

    System.out.println(&quot;处理前的集合：&quot; + list);
    System.out.println(&quot;处理后的集合：&quot; + listNew);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>输出结果：</p> <blockquote><p>处理前的集合：[m-k-l-a, 1-3-5] 处理后的集合：[m, k, l, a, 1, 3, 5]</p></blockquote> <h2 id="_3-5-归约-reduce"><a href="#_3-5-归约-reduce" class="header-anchor">#</a> <em><strong>3.5 归约(reduce)</strong></em></h2> <p>归约，也称缩减，顾名思义，是把一个流缩减成一个值，能实现对集合求和、求乘积和求最值操作。</p> <p><a href="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxm1sibbFxD2NKcicHpgzJwibWTK87YxJ1En5F9IY4zphhqzdqgkMWibTmWQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer">https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxm1sibbFxD2NKcicHpgzJwibWTK87YxJ1En5F9IY4zphhqzdqgkMWibTmWQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="案例一-求integer集合的元素之和、乘积和最大值。"><a href="#案例一-求integer集合的元素之和、乘积和最大值。" class="header-anchor">#</a> <strong><strong>案例一：求<code>Integer</code>集合的元素之和、乘积和最大值。</strong></strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Integer&gt; list = Arrays.asList(1, 3, 2, 8, 11, 4);
// 求和方式1
    Optional&lt;Integer&gt; sum = list.stream().reduce((x, y) -&gt; x + y);
// 求和方式2
    Optional&lt;Integer&gt; sum2 = list.stream().reduce(Integer::sum);
// 求和方式3
    Integer sum3 = list.stream().reduce(0, Integer::sum);

// 求乘积
    Optional&lt;Integer&gt; product = list.stream().reduce((x, y) -&gt; x * y);

// 求最大值方式1
    Optional&lt;Integer&gt; max = list.stream().reduce((x, y) -&gt; x &gt; y ? x : y);
// 求最大值写法2
    Integer max2 = list.stream().reduce(1, Integer::max);

    System.out.println(&quot;list求和：&quot; + sum.get() + &quot;,&quot; + sum2.get() + &quot;,&quot; + sum3);
    System.out.println(&quot;list求积：&quot; + product.get());
    System.out.println(&quot;list求和：&quot; + max.get() + &quot;,&quot; + max2);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>输出结果：</p> <blockquote><p>list求和：29,29,29 list求积：2112 list求和：11,11</p></blockquote> <h3 id="案例二-求所有员工的工资之和和最高工资。"><a href="#案例二-求所有员工的工资之和和最高工资。" class="header-anchor">#</a> <strong><strong>案例二：求所有员工的工资之和和最高工资。</strong></strong></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();
    personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Anni&quot;, 8200, 24, &quot;female&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Owen&quot;, 9500, 25, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Alisa&quot;, 7900, 26, &quot;female&quot;, &quot;New York&quot;));

// 求工资之和方式1：
    Optional&lt;Integer&gt; sumSalary = personList.stream().map(Person::getSalary).reduce(Integer::sum);
// 求工资之和方式2：
    Integer sumSalary2 = personList.stream().reduce(0, (sum, p) -&gt; sum += p.getSalary(),
        (sum1, sum2) -&gt; sum1 + sum2);
// 求工资之和方式3：
    Integer sumSalary3 = personList.stream().reduce(0, (sum, p) -&gt; sum += p.getSalary(), Integer::sum);

// 求最高工资方式1：
    Integer maxSalary = personList.stream().reduce(0, (max, p) -&gt; max &gt; p.getSalary() ? max : p.getSalary(),
        Integer::max);
// 求最高工资方式2：
    Integer maxSalary2 = personList.stream().reduce(0, (max, p) -&gt; max &gt; p.getSalary() ? max : p.getSalary(),
        (max1, max2) -&gt; max1 &gt; max2 ? max1 : max2);

    System.out.println(&quot;工资之和：&quot; + sumSalary.get() + &quot;,&quot; + sumSalary2 + &quot;,&quot; + sumSalary3);
    System.out.println(&quot;最高工资：&quot; + maxSalary + &quot;,&quot; + maxSalary2);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>输出结果：</p> <blockquote><p>工资之和：49300,49300,49300 最高工资：9500,9500</p></blockquote> <h2 id="_3-6-收集-collect"><a href="#_3-6-收集-collect" class="header-anchor">#</a> <em><strong>3.6 收集(collect)</strong></em></h2> <p><code>collect</code>，收集，可以说是内容最繁多、功能最丰富的部分了。从字面上去理解，就是把一个流收集起来，最终可以是收集成一个值也可以收集成一个新的集合。</p> <blockquote><p>collect主要依赖java.util.stream.Collectors类内置的静态方法。</p></blockquote> <h3 id="_3-6-1-归集-tolist-toset-tomap"><a href="#_3-6-1-归集-tolist-toset-tomap" class="header-anchor">#</a> <strong><strong>3.6.1 归集(toList/toSet/toMap)</strong></strong></h3> <p>因为流不存储数据，那么在流中的数据完成处理后，需要将流中的数据重新归集到新的集合里。<code>toList</code>、<code>toSet</code>和<code>toMap</code>比较常用，另外还有<code>toCollection</code>、<code>toConcurrentMap</code>等复杂一些的用法。</p> <p>下面用一个案例演示<code>toList</code>、<code>toSet</code>和<code>toMap</code>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Integer&gt; list = Arrays.asList(1, 6, 3, 4, 6, 7, 9, 6, 20);
    List&lt;Integer&gt; listNew = list.stream().filter(x -&gt; x % 2 == 0).collect(Collectors.toList());
    Set&lt;Integer&gt; set = list.stream().filter(x -&gt; x % 2 == 0).collect(Collectors.toSet());

    List&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();
    personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Anni&quot;, 8200, 24, &quot;female&quot;, &quot;New York&quot;));

    Map&lt;?, Person&gt; map = personList.stream().filter(p -&gt; p.getSalary() &gt; 8000)
        .collect(Collectors.toMap(Person::getName, p -&gt; p));
    System.out.println(&quot;toList:&quot; + listNew);
    System.out.println(&quot;toSet:&quot; + set);
    System.out.println(&quot;toMap:&quot; + map);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>运行结果：</p> <blockquote><p>toList：[6, 4, 6, 6, 20] toSet：[4, 20, 6] toMap：{Tom=mutest.Person@5fd0d5ae, Anni=mutest.Person@2d98a335}</p></blockquote> <h3 id="_3-6-2-统计-count-averaging"><a href="#_3-6-2-统计-count-averaging" class="header-anchor">#</a> <strong><strong>3.6.2 统计(count/averaging)</strong></strong></h3> <p><code>Collectors</code>提供了一系列用于数据统计的静态方法：</p> <ul><li>计数：<code>count</code></li> <li>平均值：<code>averagingInt</code>、<code>averagingLong</code>、<code>averagingDouble</code></li> <li>最值：<code>maxBy</code>、<code>minBy</code></li> <li>求和：<code>summingInt</code>、<code>summingLong</code>、<code>summingDouble</code></li> <li>统计以上所有：<code>summarizingInt</code>、<code>summarizingLong</code>、<code>summarizingDouble</code></li></ul> <h4 id="案例-统计员工人数、平均工资、工资总额、最高工资。"><a href="#案例-统计员工人数、平均工资、工资总额、最高工资。" class="header-anchor">#</a> <em><strong>案例：统计员工人数、平均工资、工资总额、最高工资。</strong></em>*</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();
    personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));

// 求总数
    Long count = personList.stream().collect(Collectors.counting());
// 求平均工资
    Double average = personList.stream().collect(Collectors.averagingDouble(Person::getSalary));
// 求最高工资
    Optional&lt;Integer&gt; max = personList.stream().map(Person::getSalary).collect(Collectors.maxBy(Integer::compare));
// 求工资之和
    Integer sum = personList.stream().collect(Collectors.summingInt(Person::getSalary));
// 一次性统计所有信息
    DoubleSummaryStatistics collect = personList.stream().collect(Collectors.summarizingDouble(Person::getSalary));

    System.out.println(&quot;员工总数：&quot; + count);
    System.out.println(&quot;员工平均工资：&quot; + average);
    System.out.println(&quot;员工工资总和：&quot; + sum);
    System.out.println(&quot;员工工资所有统计：&quot; + collect);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>运行结果：</p> <blockquote><p>员工总数：3 员工平均工资：7900.0 员工工资总和：23700 员工工资所有统计：DoubleSummaryStatistics{count=3, sum=23700.000000,min=7000.000000, average=7900.000000, max=8900.000000}</p></blockquote> <h3 id="_3-6-3-分组-partitioningby-groupingby"><a href="#_3-6-3-分组-partitioningby-groupingby" class="header-anchor">#</a> <strong><strong>3.6.3 分组(partitioningBy/groupingBy)</strong></strong></h3> <ul><li>分区：将<code>stream</code>按条件分为两个<code>Map</code>，比如员工按薪资是否高于8000分为两部分。</li> <li>分组：将集合分为多个Map，比如员工按性别分组。有单级分组和多级分组。</li></ul> <p><a href="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxxgc7mS7KDrhxYeVEibrWib25icv7Q7gzK3U2sTdZnibsl07Hicebsh2HQfQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer">https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxxgc7mS7KDrhxYeVEibrWib25icv7Q7gzK3U2sTdZnibsl07Hicebsh2HQfQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="案例-将员工按薪资是否高于8000分为两部分-将员工按性别和地区分组"><a href="#案例-将员工按薪资是否高于8000分为两部分-将员工按性别和地区分组" class="header-anchor">#</a> <em><strong><strong>案例：将员工按薪资是否高于8000分为两部分；将员工按性别和地区分组</strong></strong></em></h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();
    personList.add(new Person(&quot;Tom&quot;, 8900, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Jack&quot;, 7000, &quot;male&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Lily&quot;, 7800, &quot;female&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Anni&quot;, 8200, &quot;female&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Owen&quot;, 9500, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Alisa&quot;, 7900, &quot;female&quot;, &quot;New York&quot;));

// 将员工按薪资是否高于8000分组
        Map&lt;Boolean, List&lt;Person&gt;&gt; part = personList.stream().collect(Collectors.partitioningBy(x -&gt; x.getSalary() &gt; 8000));
// 将员工按性别分组
        Map&lt;String, List&lt;Person&gt;&gt; group = personList.stream().collect(Collectors.groupingBy(Person::getSex));
// 将员工先按性别分组，再按地区分组
        Map&lt;String, Map&lt;String, List&lt;Person&gt;&gt;&gt; group2 = personList.stream().collect(Collectors.groupingBy(Person::getSex, Collectors.groupingBy(Person::getArea)));
        System.out.println(&quot;员工按薪资是否大于8000分组情况：&quot; + part);
        System.out.println(&quot;员工按性别分组情况：&quot; + group);
        System.out.println(&quot;员工按性别、地区：&quot; + group2);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>输出结果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>员工按薪资是否大于8000分组情况：{false=[mutest.Person@2d98a335, mutest.Person@16b98e56, mutest.Person@7ef20235], true=[mutest.Person@27d6c5e0, mutest.Person@4f3f5b24, mutest.Person@15aeb7ab]}
员工按性别分组情况：{female=[mutest.Person@16b98e56, mutest.Person@4f3f5b24, mutest.Person@7ef20235], male=[mutest.Person@27d6c5e0, mutest.Person@2d98a335, mutest.Person@15aeb7ab]}
员工按性别、地区：{female={New York=[mutest.Person@4f3f5b24, mutest.Person@7ef20235], Washington=[mutest.Person@16b98e56]}, male={New York=[mutest.Person@27d6c5e0, mutest.Person@15aeb7ab], Washington=[mutest.Person@2d98a335]}}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-6-4-接合-joining"><a href="#_3-6-4-接合-joining" class="header-anchor">#</a> <strong><strong>3.6.4 接合(joining)</strong></strong></h3> <p><code>joining</code>可以将stream中的元素用特定的连接符（没有的话，则直接连接）连接成一个字符串。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();
    personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));

    String names = personList.stream().map(p -&gt; p.getName()).collect(Collectors.joining(&quot;,&quot;));
    System.out.println(&quot;所有员工的姓名：&quot; + names);
    List&lt;String&gt; list = Arrays.asList(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;);
    String string = list.stream().collect(Collectors.joining(&quot;-&quot;));
    System.out.println(&quot;拼接后的字符串：&quot; + string);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>运行结果：</p> <blockquote><p>所有员工的姓名：Tom,Jack,Lily 拼接后的字符串：A-B-C</p></blockquote> <h3 id="_3-6-5-归约-reducing"><a href="#_3-6-5-归约-reducing" class="header-anchor">#</a> <strong><strong>3.6.5 归约(reducing)</strong></strong></h3> <p><code>Collectors</code>类提供的<code>reducing</code>方法，相比于<code>stream</code>本身的<code>reduce</code>方法，增加了对自定义归约的支持。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();
    personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));

// 每个员工减去起征点后的薪资之和（这个例子并不严谨，但一时没想到好的例子）
    Integer sum = personList.stream().collect(Collectors.reducing(0, Person::getSalary, (i, j) -&gt; (i + j - 5000)));
    System.out.println(&quot;员工扣税薪资总和：&quot; + sum);

// stream的reduce
    Optional&lt;Integer&gt; sum2 = personList.stream().map(Person::getSalary).reduce(Integer::sum);
    System.out.println(&quot;员工薪资总和：&quot; + sum2.get());
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>运行结果：</p> <blockquote><p>员工扣税薪资总和：8700 员工薪资总和：23700</p></blockquote> <h2 id="_3-7-排序-sorted"><a href="#_3-7-排序-sorted" class="header-anchor">#</a> <em><strong>3.7 排序(sorted)</strong></em></h2> <p>sorted，中间操作。有两种排序：</p> <ul><li>sorted()：自然排序，流中元素需实现Comparable接口</li> <li>sorted(Comparator com)：Comparator排序器自定义排序</li></ul> <p><strong>案例：将员工按工资由高到低（工资一样则按年龄由大到小）排序</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    List&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();

    personList.add(new Person(&quot;Sherry&quot;, 9000, 24, &quot;female&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Tom&quot;, 8900, 22, &quot;male&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Jack&quot;, 9000, 25, &quot;male&quot;, &quot;Washington&quot;));
    personList.add(new Person(&quot;Lily&quot;, 8800, 26, &quot;male&quot;, &quot;New York&quot;));
    personList.add(new Person(&quot;Alisa&quot;, 9000, 26, &quot;female&quot;, &quot;New York&quot;));

// 按工资升序排序（自然排序）
    List&lt;String&gt; newList = personList.stream().sorted(Comparator.comparing(Person::getSalary)).map(Person::getName)
        .collect(Collectors.toList());
// 按工资倒序排序
    List&lt;String&gt; newList2 = personList.stream().sorted(Comparator.comparing(Person::getSalary).reversed())
        .map(Person::getName).collect(Collectors.toList());
// 先按工资再按年龄升序排序
    List&lt;String&gt; newList3 = personList.stream()
        .sorted(Comparator.comparing(Person::getSalary).thenComparing(Person::getAge)).map(Person::getName)
        .collect(Collectors.toList());
// 先按工资再按年龄自定义排序（降序）
    List&lt;String&gt; newList4 = personList.stream().sorted((p1, p2) -&gt; {
      if (p1.getSalary() == p2.getSalary()) {
        return p2.getAge() - p1.getAge();
      } else {
        return p2.getSalary() - p1.getSalary();
      }
    }).map(Person::getName).collect(Collectors.toList());

    System.out.println(&quot;按工资升序排序：&quot; + newList);
    System.out.println(&quot;按工资降序排序：&quot; + newList2);
    System.out.println(&quot;先按工资再按年龄升序排序：&quot; + newList3);
    System.out.println(&quot;先按工资再按年龄自定义降序排序：&quot; + newList4);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>运行结果：</p> <blockquote><p>按工资升序排序：[Lily, Tom, Sherry, Jack, Alisa] 按工资降序排序：[Sherry, Jack, Alisa, Tom, Lily] 先按工资再按年龄升序排序：[Lily, Tom, Sherry, Jack, Alisa] 先按工资再按年龄自定义降序排序：[Alisa, Jack, Sherry, Tom, Lily]</p></blockquote> <h2 id="_3-8-提取-组合"><a href="#_3-8-提取-组合" class="header-anchor">#</a> <strong>3.8 提取/组合</strong></h2> <p>流也可以进行合并、去重、限制、跳过等操作。</p> <p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxib2AKRxUOoTchOZALI1QBw842MtU1BVThOkMbuk7RDqp3QSvzSDWbDg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer">https://mmbiz.qpic.cn/mmbiz_jpg/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxib2AKRxUOoTchOZALI1QBw842MtU1BVThOkMbuk7RDqp3QSvzSDWbDg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxIYqUenVAFm8MpRRdUmN0GA3XQXYkwnkXzVlG9iciazV6PSTYvt8IY1iaQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer">https://mmbiz.qpic.cn/mmbiz_jpg/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxIYqUenVAFm8MpRRdUmN0GA3XQXYkwnkXzVlG9iciazV6PSTYvt8IY1iaQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://mmbiz.qpic.cn/mmbiz_jpg/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxh8m7w7tfQ5NSGLarvrN4F6G1OqvESLAh7WXymBxJmibCBu6FeibtmCdg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" target="_blank" rel="noopener noreferrer">https://mmbiz.qpic.cn/mmbiz_jpg/oTKHc6F8tshlcDdYLwybrjgMR9CvUtJxh8m7w7tfQ5NSGLarvrN4F6G1OqvESLAh7WXymBxJmibCBu6FeibtmCdg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class StreamTest {
  public static void main(String[] args) {
    String[] arr1 = { &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; };
    String[] arr2 = { &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot; };

    Stream&lt;String&gt; stream1 = Stream.of(arr1);
    Stream&lt;String&gt; stream2 = Stream.of(arr2);
// concat:合并两个流 distinct：去重
    List&lt;String&gt; newList = Stream.concat(stream1, stream2).distinct().collect(Collectors.toList());
// limit：限制从流中获得前n个数据
    List&lt;Integer&gt; collect = Stream.iterate(1, x -&gt; x + 2).limit(10).collect(Collectors.toList());
// skip：跳过前n个数据
    List&lt;Integer&gt; collect2 = Stream.iterate(1, x -&gt; x + 2).skip(1).limit(5).collect(Collectors.toList());

    System.out.println(&quot;流合并：&quot; + newList);
    System.out.println(&quot;limit：&quot; + collect);
    System.out.println(&quot;skip：&quot; + collect2);
  }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>运行结果：</p> <blockquote><p>流合并：[a, b, c, d, e, f, g] limit：[1, 3, 5, 7, 9, 11, 13, 15, 17, 19] skip：[3, 5, 7, 9, 11]</p></blockquote> <p>好，以上就是全部内容，能坚持看到这里，你一定很有收获。</p> <hr> <p><a href="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==">data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==</a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/1/15 下午2:19:19</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/md/java/learn/ChromeExtensions.html" class="prev">
        Chrome Extensions
      </a></span> <span class="next"><a href="/md/java/learn/Java8-Optional.html">
        Java 8 - Optional
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1f563e48.js" defer></script><script src="/assets/js/3.53f669bd.js" defer></script><script src="/assets/js/19.f113b0b6.js" defer></script>
  </body>
</html>
