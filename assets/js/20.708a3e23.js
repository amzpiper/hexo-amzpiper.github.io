(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{644:function(n,s,a){"use strict";a.r(s);var e=a(24),r=Object(e.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h1",{attrs:{id:"maven"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maven"}},[n._v("#")]),n._v(" Maven")]),n._v(" "),a("h2",{attrs:{id:"maven介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maven介绍"}},[n._v("#")]),n._v(" Maven介绍:")]),n._v(" "),a("p",[n._v("Maven就是是专门为Java项目打造的管理和构建工具，它的主要功能有：")]),n._v(" "),a("ul",[a("li",[n._v("提供了一套标准化的项目结构；")]),n._v(" "),a("li",[n._v("提供了一套标准化的构建流程（编译，测试，打包，发布……）；")]),n._v(" "),a("li",[n._v("提供了一套依赖管理机制。")])]),n._v(" "),a("h3",{attrs:{id:"maven项目结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maven项目结构"}},[n._v("#")]),n._v(" Maven项目结构")]),n._v(" "),a("p",[n._v("一个使用Maven管理的普通的Java项目，它的目录结构默认如下：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("a-maven-project\n├── pom.xml\n├── src\n│   ├── main\n│   │   ├── java\n│   │   └── resources\n│   └── test\n│       ├── java\n│       └── resources\n└── target\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br")])]),a("p",[n._v("项目的根目录"),a("code",[n._v("a-maven-project")]),n._v("是项目名，它有一个项目描述文件"),a("code",[n._v("pom.xml")]),n._v("，存放Java源码的目录是"),a("code",[n._v("src/main/java")]),n._v("，存放资源文件的目录是"),a("code",[n._v("src/main/resources")]),n._v("，存放测试源码的目录是"),a("code",[n._v("src/test/java")]),n._v("，存放测试资源的目录是"),a("code",[n._v("src/test/resources")]),n._v("，最后，所有编译、打包生成的文件都放在"),a("code",[n._v("target")]),n._v("目录里。这些就是一个Maven项目的标准目录结构。")]),n._v(" "),a("p",[n._v("所有的目录结构都是约定好的标准结构，我们千万不要随意修改目录结构。使用标准结构不需要做任何配置，Maven就可以正常使用。")]),n._v(" "),a("p",[n._v("我们再来看最关键的一个项目描述文件"),a("code",[n._v("pom.xml")]),n._v("，它的内容长得像下面：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<project ...>\n\t<modelVersion>4.0.0</modelVersion>\n\t<groupId>com.itranswarp.learnjava</groupId>\n\t<artifactId>hello</artifactId>\n\t<version>1.0</version>\n\t<packaging>jar</packaging>\n\t<properties>\n        ...\n\t</properties>\n\t<dependencies>\n        <dependency>\n            <groupId>commons-logging</groupId>\n            <artifactId>commons-logging</artifactId>\n            <version>1.2</version>\n        </dependency>\n\t</dependencies>\n</project>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br")])]),a("p",[n._v("其中，"),a("code",[n._v("groupId")]),n._v("类似于Java的包名，通常是公司或组织名称，"),a("code",[n._v("artifactId")]),n._v("类似于Java的类名，通常是项目名称，再加上"),a("code",[n._v("version")]),n._v("，一个Maven工程就是由"),a("code",[n._v("groupId")]),n._v("，"),a("code",[n._v("artifactId")]),n._v("和"),a("code",[n._v("version")]),n._v("作为唯一标识。我们在引用其他第三方库的时候，也是通过这3个变量确定。例如，依赖"),a("code",[n._v("commons-logging")]),n._v("：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<dependency>\n    <groupId>commons-logging</groupId>\n    <artifactId>commons-logging</artifactId>\n    <version>1.2</version>\n</dependency>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br")])]),a("p",[n._v("使用"),a("code",[n._v("<dependency>")]),n._v("声明一个依赖后，Maven就会自动下载这个依赖包并把它放到classpath中。")]),n._v(" "),a("h3",{attrs:{id:"安装maven"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装maven"}},[n._v("#")]),n._v(" 安装Maven")]),n._v(" "),a("p",[n._v("要安装Maven，可以从"),a("a",{attrs:{href:"https://maven.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[n._v("Maven官网"),a("OutboundLink")],1),n._v("下载最新的Maven 3.6.x，然后在本地解压，设置几个环境变量：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("M2_HOME=/path/to/maven-3.6.xPATH=$PATH:$M2_HOME/bin\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("h2",{attrs:{id:"依赖管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#依赖管理"}},[n._v("#")]),n._v(" 依赖管理:")]),n._v(" "),a("p",[n._v("如果我们的项目依赖第三方的jar包，例如commons logging，那么问题来了：commons logging发布的jar包在哪下载？")]),n._v(" "),a("p",[n._v("如果我们还希望依赖log4j，那么使用log4j需要哪些jar包？")]),n._v(" "),a("p",[n._v("类似的依赖还包括：JUnit，JavaMail，MySQL驱动等等，一个可行的方法是通过搜索引擎搜索到项目的官网，然后手动下载zip包，解压，放入classpath。但是，这个过程非常繁琐。")]),n._v(" "),a("p",[n._v("Maven解决了依赖管理问题。例如，我们的项目依赖"),a("code",[n._v("abc")]),n._v("这个jar包，而"),a("code",[n._v("abc")]),n._v("又依赖"),a("code",[n._v("xyz")]),n._v("这个jar包：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("┌──────────────┐\n│Sample Project│\n└──────────────┘\n        │\n        ▼\n┌──────────────┐\n│     abc      │\n└──────────────┘\n        │\n        ▼\n┌──────────────┐\n│     xyz      │\n└──────────────┘\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br")])]),a("p",[n._v("当我们声明了"),a("code",[n._v("abc")]),n._v("的依赖时，Maven自动把"),a("code",[n._v("abc")]),n._v("和"),a("code",[n._v("xyz")]),n._v("都加入了我们的项目依赖，不需要我们自己去研究"),a("code",[n._v("abc")]),n._v("是否需要依赖"),a("code",[n._v("xyz")]),n._v("。")]),n._v(" "),a("p",[n._v("因此，Maven的第一个作用就是解决依赖管理。我们声明了自己的项目需要"),a("code",[n._v("abc")]),n._v("，Maven会自动导入"),a("code",[n._v("abc")]),n._v("的jar包，再判断出"),a("code",[n._v("abc")]),n._v("需要"),a("code",[n._v("xyz")]),n._v("，又会自动导入"),a("code",[n._v("xyz")]),n._v("的jar包，这样，最终我们的项目会依赖"),a("code",[n._v("abc")]),n._v("和"),a("code",[n._v("xyz")]),n._v("两个jar包。")]),n._v(" "),a("p",[n._v("我们来看一个复杂依赖示例：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n    <version>1.4.2.RELEASE</version>\n</dependency>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br")])]),a("p",[n._v("当我们声明一个"),a("code",[n._v("spring-boot-starter-web")]),n._v("依赖时，Maven会自动解析并判断最终需要大概二三十个其他依赖：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("spring-boot-starter-web\n  spring-boot-starter\n    spring-boot\n    sprint-boot-autoconfigure\n    spring-boot-starter-logging\n      logback-classic\n        logback-core\n        slf4j-api\n      jcl-over-slf4j\n        slf4j-api\n      jul-to-slf4j\n        slf4j-api\n      log4j-over-slf4j\n        slf4j-api\n    spring-core\n    snakeyaml\n  spring-boot-starter-tomcat\n    tomcat-embed-core\n    tomcat-embed-el\n    tomcat-embed-websocket\n      tomcat-embed-core\n  jackson-databind\n  ...\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br")])]),a("p",[n._v("如果我们自己去手动管理这些依赖是非常费时费力的，而且出错的概率很大。")]),n._v(" "),a("h3",{attrs:{id:"依赖关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#依赖关系"}},[n._v("#")]),n._v(" 依赖关系:")]),n._v(" "),a("p",[n._v("Maven定义了几种依赖关系，分别是"),a("code",[n._v("compile")]),n._v("、"),a("code",[n._v("test")]),n._v("、"),a("code",[n._v("runtime")]),n._v("和"),a("code",[n._v("provided")]),n._v("：")]),n._v(" "),a("p",[a("a",{attrs:{href:"https://www.notion.so/6247453f8f38404c9e697d1c7283ff04",target:"_blank",rel:"noopener noreferrer"}},[n._v("Untitled"),a("OutboundLink")],1)]),n._v(" "),a("p",[n._v("其中，默认的"),a("code",[n._v("compile")]),n._v("是最常用的，Maven会把这种类型的依赖直接放入classpath。")]),n._v(" "),a("p",[a("code",[n._v("test")]),n._v("依赖表示仅在测试时使用，正常运行时并不需要。最常用的"),a("code",[n._v("test")]),n._v("依赖就是JUnit：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<dependency>\n    <groupId>org.junit.jupiter</groupId>\n    <artifactId>junit-jupiter-api</artifactId>\n    <version>5.3.2</version>\n    <scope>test</scope>\n</dependency>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br")])]),a("p",[a("code",[n._v("runtime")]),n._v("依赖表示编译时不需要，但运行时需要。最典型的"),a("code",[n._v("runtime")]),n._v("依赖是JDBC驱动，例如MySQL驱动：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n    <version>5.1.48</version>\n    <scope>runtime</scope>\n</dependency>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br")])]),a("p",[a("code",[n._v("provided")]),n._v("依赖表示编译时需要，但运行时不需要。最典型的"),a("code",[n._v("provided")]),n._v("依赖是Servlet API，编译的时候需要，但是运行时，Servlet服务器内置了相关的jar，所以运行期不需要：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<dependency>\n    <groupId>javax.servlet</groupId>\n    <artifactId>javax.servlet-api</artifactId>\n    <version>4.0.0</version>\n    <scope>provided</scope>\n</dependency>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br")])]),a("p",[n._v("最后一个问题是，Maven如何知道从何处下载所需的依赖？也就是相关的jar包？答案是Maven维护了一个中央仓库（"),a("a",{attrs:{href:"https://repo1.maven.org/",target:"_blank",rel:"noopener noreferrer"}},[n._v("repo1.maven.org"),a("OutboundLink")],1),n._v("），所有第三方库将自身的jar以及相关信息上传至中央仓库，Maven就可以从中央仓库把所需依赖下载到本地。")]),n._v(" "),a("p",[n._v("Maven并不会每次都从中央仓库下载jar包。一个jar包一旦被下载过，就会被Maven自动缓存在本地目录（用户主目录的"),a("code",[n._v(".m2")]),n._v("目录），所以，除了第一次编译时因为下载需要时间会比较慢，后续过程因为有本地缓存，并不会重复下载相同的jar包。")]),n._v(" "),a("h3",{attrs:{id:"唯一id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#唯一id"}},[n._v("#")]),n._v(" 唯一ID")]),n._v(" "),a("p",[n._v("对于某个依赖，Maven只需要3个变量即可唯一确定某个jar包：")]),n._v(" "),a("ul",[a("li",[n._v("groupId：属于组织的名称，类似Java的包名；")]),n._v(" "),a("li",[n._v("artifactId：该jar包自身的名称，类似Java的类名；")]),n._v(" "),a("li",[n._v("version：该jar包的版本。")])]),n._v(" "),a("p",[n._v("通过上述3个变量，即可唯一确定某个jar包。Maven通过对jar包进行PGP签名确保任何一个jar包一经发布就无法修改。修改已发布jar包的唯一方法是发布一个新版本。")]),n._v(" "),a("p",[n._v("因此，某个jar包一旦被Maven下载过，即可永久地安全缓存在本地。")]),n._v(" "),a("p",[n._v("注：只有以"),a("code",[n._v("-SNAPSHOT")]),n._v("结尾的版本号会被Maven视为开发版本，开发版本每次都会重复下载，这种SNAPSHOT版本只能用于内部私有的Maven repo，公开发布的版本不允许出现SNAPSHOT。")]),n._v(" "),a("h3",{attrs:{id:"maven镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maven镜像"}},[n._v("#")]),n._v(" Maven镜像")]),n._v(" "),a("p",[n._v("除了可以从Maven的中央仓库下载外，还可以从Maven的镜像仓库下载。如果访问Maven的中央仓库非常慢，我们可以选择一个速度较快的Maven的镜像仓库。Maven镜像仓库定期从中央仓库同步：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("           slow    ┌───────────────────┐\n    ┌─────────────>│Maven Central Repo.│\n    │              └───────────────────┘\n    │                        │\n    │                        │sync\n    │                        ▼\n┌───────┐  fast    ┌───────────────────┐\n│ User  │─────────>│Maven Mirror Repo. │\n└───────┘          └───────────────────┘\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br")])]),a("p",[n._v("中国区用户可以使用阿里云提供的Maven镜像仓库。使用Maven镜像仓库需要一个配置，在用户主目录下进入"),a("code",[n._v(".m2")]),n._v("目录，创建一个"),a("code",[n._v("settings.xml")]),n._v("配置文件，内容如下：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<settings>\n    <mirrors>\n        <mirror>\n            <id>aliyun</id>\n            <name>aliyun</name>\n            <mirrorOf>central</mirrorOf>\n\x3c!-- 国内推荐阿里云的Maven镜像 --\x3e<url>https://maven.aliyun.com/repository/central</url>\n        </mirror>\n    </mirrors>\n</settings>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br")])]),a("p",[n._v("配置镜像仓库后，Maven的下载速度就会非常快。")]),n._v(" "),a("h3",{attrs:{id:"搜索第三方组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搜索第三方组件"}},[n._v("#")]),n._v(" 搜索第三方组件")]),n._v(" "),a("p",[n._v("最后一个问题：如果我们要引用一个第三方组件，比如"),a("code",[n._v("okhttp")]),n._v("，如何确切地获得它的"),a("code",[n._v("groupId")]),n._v("、"),a("code",[n._v("artifactId")]),n._v("和"),a("code",[n._v("version")]),n._v("？方法是通过"),a("a",{attrs:{href:"https://search.maven.org/",target:"_blank",rel:"noopener noreferrer"}},[n._v("search.maven.org"),a("OutboundLink")],1),n._v("搜索关键字，找到对应的组件后，直接复制：")]),n._v(" "),a("p",[a("a",{attrs:{href:"https://www.liaoxuefeng.com/files/attachments/1322179230695490/l",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://www.liaoxuefeng.com/files/attachments/1322179230695490/l"),a("OutboundLink")],1)]),n._v(" "),a("h3",{attrs:{id:"命令行编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令行编译"}},[n._v("#")]),n._v(" 命令行编译")]),n._v(" "),a("p",[n._v("在命令中，进入到"),a("code",[n._v("pom.xml")]),n._v("所在目录，输入以下命令：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("$ mvn clean package\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("h2",{attrs:{id:"构建流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建流程"}},[n._v("#")]),n._v(" 构建流程:")]),n._v(" "),a("h3",{attrs:{id:"构建流程-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建流程-2"}},[n._v("#")]),n._v(" 构建流程")]),n._v(" "),a("p",[n._v("Maven不但有标准化的项目结构，而且还有一套标准化的构建流程，可以自动化实现编译，打包，发布，等等。")]),n._v(" "),a("h3",{attrs:{id:"lifecycle和phase"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lifecycle和phase"}},[n._v("#")]),n._v(" Lifecycle和Phase")]),n._v(" "),a("p",[n._v("使用Maven时，我们首先要了解什么是Maven的生命周期（lifecycle）。")]),n._v(" "),a("p",[n._v("Maven的生命周期由一系列阶段（phase）构成，以内置的生命周期"),a("code",[n._v("default")]),n._v("为例，它包含以下phase：")]),n._v(" "),a("ul",[a("li",[n._v("validate")]),n._v(" "),a("li",[n._v("initialize")]),n._v(" "),a("li",[n._v("generate-sources")]),n._v(" "),a("li",[n._v("process-sources")]),n._v(" "),a("li",[n._v("generate-resources")]),n._v(" "),a("li",[n._v("process-resources")]),n._v(" "),a("li",[n._v("compile")]),n._v(" "),a("li",[n._v("process-classes")]),n._v(" "),a("li",[n._v("generate-test-sources")]),n._v(" "),a("li",[n._v("process-test-sources")]),n._v(" "),a("li",[n._v("generate-test-resources")]),n._v(" "),a("li",[n._v("process-test-resources")]),n._v(" "),a("li",[n._v("test-compile")]),n._v(" "),a("li",[n._v("process-test-classes")]),n._v(" "),a("li",[n._v("test")]),n._v(" "),a("li",[n._v("prepare-package")]),n._v(" "),a("li",[n._v("package")]),n._v(" "),a("li",[n._v("pre-integration-test")]),n._v(" "),a("li",[n._v("integration-test")]),n._v(" "),a("li",[n._v("post-integration-test")]),n._v(" "),a("li",[n._v("verify")]),n._v(" "),a("li",[n._v("install")]),n._v(" "),a("li",[n._v("deploy")])]),n._v(" "),a("p",[n._v("如果我们运行"),a("code",[n._v("mvn package")]),n._v("，Maven就会执行"),a("code",[n._v("default")]),n._v("生命周期，它会从开始一直运行到"),a("code",[n._v("package")]),n._v("这个phase为止：")]),n._v(" "),a("ul",[a("li",[n._v("validate")]),n._v(" "),a("li",[n._v("...")]),n._v(" "),a("li",[n._v("package")])]),n._v(" "),a("p",[n._v("如果我们运行"),a("code",[n._v("mvn compile")]),n._v("，Maven也会执行"),a("code",[n._v("default")]),n._v("生命周期，但这次它只会运行到"),a("code",[n._v("compile")]),n._v("，即以下几个phase：")]),n._v(" "),a("ul",[a("li",[n._v("validate")]),n._v(" "),a("li",[n._v("...")]),n._v(" "),a("li",[n._v("compile")])]),n._v(" "),a("p",[n._v("Maven另一个常用的生命周期是"),a("code",[n._v("clean")]),n._v("，它会执行3个phase：")]),n._v(" "),a("ul",[a("li",[n._v("pre-clean")]),n._v(" "),a("li",[n._v("clean （注意这个clean不是lifecycle而是phase）")]),n._v(" "),a("li",[n._v("post-clean")])]),n._v(" "),a("p",[n._v("所以，我们使用"),a("code",[n._v("mvn")]),n._v("这个命令时，后面的参数是phase，Maven自动根据生命周期运行到指定的phase。")]),n._v(" "),a("p",[n._v("更复杂的例子是指定多个phase，例如，运行"),a("code",[n._v("mvn clean package")]),n._v("，Maven先执行"),a("code",[n._v("clean")]),n._v("生命周期并运行到"),a("code",[n._v("clean")]),n._v("这个phase，然后执行"),a("code",[n._v("default")]),n._v("生命周期并运行到"),a("code",[n._v("package")]),n._v("这个phase，实际执行的phase如下：")]),n._v(" "),a("ul",[a("li",[n._v("pre-clean")]),n._v(" "),a("li",[n._v("clean （注意这个clean是phase）")]),n._v(" "),a("li",[n._v("validate")]),n._v(" "),a("li",[n._v("...")]),n._v(" "),a("li",[n._v("package")])]),n._v(" "),a("p",[n._v("在实际开发过程中，经常使用的命令有：")]),n._v(" "),a("p",[a("code",[n._v("mvn clean")]),n._v("：清理所有生成的class和jar；")]),n._v(" "),a("p",[a("code",[n._v("mvn clean compile")]),n._v("：先清理，再执行到"),a("code",[n._v("compile")]),n._v("；")]),n._v(" "),a("p",[a("code",[n._v("mvn clean test")]),n._v("：先清理，再执行到"),a("code",[n._v("test")]),n._v("，因为执行"),a("code",[n._v("test")]),n._v("前必须执行"),a("code",[n._v("compile")]),n._v("，所以这里不必指定"),a("code",[n._v("compile")]),n._v("；")]),n._v(" "),a("p",[a("code",[n._v("mvn clean package")]),n._v("：先清理，再执行到"),a("code",[n._v("package")]),n._v("。")]),n._v(" "),a("p",[n._v("大多数phase在执行过程中，因为我们通常没有在"),a("code",[n._v("pom.xml")]),n._v("中配置相关的设置，所以这些phase什么事情都不做。")]),n._v(" "),a("p",[n._v("经常用到的phase其实只有几个：")]),n._v(" "),a("ul",[a("li",[n._v("clean：清理")]),n._v(" "),a("li",[n._v("compile：编译")]),n._v(" "),a("li",[n._v("test：运行测试")]),n._v(" "),a("li",[n._v("package：打包")])]),n._v(" "),a("h3",{attrs:{id:"goal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#goal"}},[n._v("#")]),n._v(" Goal")]),n._v(" "),a("p",[n._v("执行一个phase又会触发一个或多个goal：")]),n._v(" "),a("p",[a("a",{attrs:{href:"https://www.notion.so/a20188a3e0174e87a895099f07ad5bf6",target:"_blank",rel:"noopener noreferrer"}},[n._v("Untitled"),a("OutboundLink")],1)]),n._v(" "),a("p",[n._v("goal的命名总是"),a("code",[n._v("abc:xyz")]),n._v("这种形式。")]),n._v(" "),a("p",[n._v("看到这里，相信大家对lifecycle、phase和goal已经明白了吧？")]),n._v(" "),a("h2",{attrs:{id:"使用插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用插件"}},[n._v("#")]),n._v(" 使用插件:")]),n._v(" "),a("p",[n._v("我们在前面介绍了Maven的lifecycle，phase和goal：使用Maven构建项目就是执行lifecycle，执行到指定的phase为止。每个phase会执行自己默认的一个或多个goal。goal是最小任务单元。")]),n._v(" "),a("p",[n._v("我们以"),a("code",[n._v("compile")]),n._v("这个phase为例，如果执行：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("mvn compile\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br")])]),a("p",[n._v("Maven将执行"),a("code",[n._v("compile")]),n._v("这个phase，这个phase会调用"),a("code",[n._v("compiler")]),n._v("插件执行关联的"),a("code",[n._v("compiler:compile")]),n._v("这个goal。")]),n._v(" "),a("p",[n._v("实际上，执行每个phase，都是通过某个插件（plugin）来执行的，Maven本身其实并不知道如何执行"),a("code",[n._v("compile")]),n._v("，它只是负责找到对应的"),a("code",[n._v("compiler")]),n._v("插件，然后执行默认的"),a("code",[n._v("compiler:compile")]),n._v("这个goal来完成编译。")]),n._v(" "),a("p",[n._v("所以，使用Maven，实际上就是配置好需要使用的插件，然后通过phase调用它们。")]),n._v(" "),a("p",[n._v("Maven已经内置了一些常用的标准插件：")]),n._v(" "),a("p",[a("a",{attrs:{href:"https://www.notion.so/885e77e11f2d4d69af41315dd443f44f",target:"_blank",rel:"noopener noreferrer"}},[n._v("Untitled"),a("OutboundLink")],1)]),n._v(" "),a("p",[n._v("如果标准插件无法满足需求，我们还可以使用自定义插件。使用自定义插件的时候，需要声明。例如，使用"),a("code",[n._v("maven-shade-plugin")]),n._v("可以创建一个可执行的jar，要使用这个插件，需要在"),a("code",[n._v("pom.xml")]),n._v("中声明它：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<project>\n    ...\n\t<build>\n\t\t<plugins>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\n\t\t\t\t<artifactId>maven-shade-plugin</artifactId>\n                <version>3.2.1</version>\n\t\t\t\t<executions>\n\t\t\t\t\t<execution>\n\t\t\t\t\t\t<phase>package</phase>\n\t\t\t\t\t\t<goals>\n\t\t\t\t\t\t\t<goal>shade</goal>\n\t\t\t\t\t\t</goals>\n\t\t\t\t\t\t<configuration>\n                            ...\n\t\t\t\t\t\t</configuration>\n\t\t\t\t\t</execution>\n\t\t\t\t</executions>\n\t\t\t</plugin>\n\t\t</plugins>\n\t</build>\n</project>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br")])]),a("p",[n._v("自定义插件往往需要一些配置，例如，"),a("code",[n._v("maven-shade-plugin")]),n._v("需要指定Java程序的入口，它的配置是：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<configuration>\n    <transformers>\n        <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">\n            <mainClass>com.itranswarp.learnjava.Main</mainClass>\n        </transformer>\n    </transformers>\n</configuration>\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br")])]),a("p",[n._v("注意，Maven自带的标准插件例如"),a("code",[n._v("compiler")]),n._v("是无需声明的，只有引入其它的插件才需要声明。")]),n._v(" "),a("p",[n._v("下面列举了一些常用的插件：")]),n._v(" "),a("ul",[a("li",[n._v("maven-shade-plugin：打包所有依赖包并生成可执行jar；")]),n._v(" "),a("li",[n._v("cobertura-maven-plugin：生成单元测试覆盖率报告；")]),n._v(" "),a("li",[n._v("findbugs-maven-plugin：对Java源码进行静态分析以找出潜在问题。")])]),n._v(" "),a("h2",{attrs:{id:"模块管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块管理"}},[n._v("#")]),n._v(" 模块管理:")]),n._v(" "),a("p",[n._v("在软件开发中，把一个大项目分拆为多个模块是降低软件复杂度的有效方法：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("                        ┌ ─ ─ ─ ─ ─ ─ ┐\n                          ┌─────────┐\n                        │ │Module A │ │\n                          └─────────┘\n┌──────────────┐ split  │ ┌─────────┐ │\n│Single Project│───────>  │Module B │\n└──────────────┘        │ └─────────┘ │\n                          ┌─────────┐\n                        │ │Module C │ │\n                          └─────────┘\n                        └ ─ ─ ─ ─ ─ ─ ┘\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br")])]),a("p",[n._v("对于Maven工程来说，原来是一个大项目：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("single-project\n├── pom.xml\n└── src\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br")])]),a("p",[n._v("现在可以分拆成3个模块：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("mutiple-project\n├── module-a\n│   ├── pom.xml\n│   └── src\n├── module-b\n│   ├── pom.xml\n│   └── src\n└── module-c\n    ├── pom.xml\n    └── src\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br")])]),a("p",[n._v("Maven可以有效地管理多个模块，我们只需要把每个模块当作一个独立的Maven项目，它们有各自独立的"),a("code",[n._v("pom.xml")]),n._v("。例如，模块A的"),a("code",[n._v("pom.xml")]),n._v("：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<project xmlns="http://maven.apache.org/POM/4.0.0"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.itranswarp.learnjava</groupId>\n    <artifactId>module-a</artifactId>\n    <version>1.0</version>\n    <packaging>jar</packaging>\n\n    <name>module-a</name>\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <maven.compiler.source>11</maven.compiler.source>\n        <maven.compiler.target>11</maven.compiler.target>\n        <java.version>11</java.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>slf4j-api</artifactId>\n            <version>1.7.28</version>\n        </dependency>\n        <dependency>\n            <groupId>ch.qos.logback</groupId>\n            <artifactId>logback-classic</artifactId>\n            <version>1.2.3</version>\n            <scope>runtime</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.junit.jupiter</groupId>\n            <artifactId>junit-jupiter-engine</artifactId>\n            <version>5.5.2</version>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n</project>\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br")])]),a("p",[n._v("模块B的"),a("code",[n._v("pom.xml")]),n._v("：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<project xmlns="http://maven.apache.org/POM/4.0.0"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.itranswarp.learnjava</groupId>\n    <artifactId>module-b</artifactId>\n    <version>1.0</version>\n    <packaging>jar</packaging>\n\n    <name>module-b</name>\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <maven.compiler.source>11</maven.compiler.source>\n        <maven.compiler.target>11</maven.compiler.target>\n        <java.version>11</java.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>slf4j-api</artifactId>\n            <version>1.7.28</version>\n        </dependency>\n        <dependency>\n            <groupId>ch.qos.logback</groupId>\n            <artifactId>logback-classic</artifactId>\n            <version>1.2.3</version>\n            <scope>runtime</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.junit.jupiter</groupId>\n            <artifactId>junit-jupiter-engine</artifactId>\n            <version>5.5.2</version>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n</project>\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br")])]),a("p",[n._v("可以看出来，模块A和模块B的"),a("code",[n._v("pom.xml")]),n._v("高度相似，因此，我们可以提取出共同部分作为"),a("code",[n._v("parent")]),n._v("：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<project xmlns="http://maven.apache.org/POM/4.0.0"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.itranswarp.learnjava</groupId>\n    <artifactId>parent</artifactId>\n    <version>1.0</version>\n    <packaging>pom</packaging>\n\n    <name>parent</name>\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <maven.compiler.source>11</maven.compiler.source>\n        <maven.compiler.target>11</maven.compiler.target>\n        <java.version>11</java.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>slf4j-api</artifactId>\n            <version>1.7.28</version>\n        </dependency>\n        <dependency>\n            <groupId>ch.qos.logback</groupId>\n            <artifactId>logback-classic</artifactId>\n            <version>1.2.3</version>\n            <scope>runtime</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.junit.jupiter</groupId>\n            <artifactId>junit-jupiter-engine</artifactId>\n            <version>5.5.2</version>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n</project>\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br")])]),a("p",[n._v("注意到parent的"),a("code",[n._v("<packaging>")]),n._v("是"),a("code",[n._v("pom")]),n._v("而不是"),a("code",[n._v("jar")]),n._v("，因为"),a("code",[n._v("parent")]),n._v("本身不含任何Java代码。编写"),a("code",[n._v("parent")]),n._v("的"),a("code",[n._v("pom.xml")]),n._v("只是为了在各个模块中减少重复的配置。现在我们的整个工程结构如下：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("multiple-project\n├── pom.xml\n├── parent\n│   └── pom.xml\n├── module-a\n│   ├── pom.xml\n│   └── src\n├── module-b\n│   ├── pom.xml\n│   └── src\n└── module-c\n    ├── pom.xml\n    └── src\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br")])]),a("p",[n._v("这样模块A就可以简化为：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<project xmlns="http://maven.apache.org/POM/4.0.0"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <parent>\n        <groupId>com.itranswarp.learnjava</groupId>\n        <artifactId>parent</artifactId>\n        <version>1.0</version>\n        <relativePath>../parent/pom.xml</relativePath>\n    </parent>\n\n    <artifactId>module-a</artifactId>\n    <packaging>jar</packaging>\n    <name>module-a</name>\n</project>\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br")])]),a("p",[n._v("模块B、模块C都可以直接从"),a("code",[n._v("parent")]),n._v("继承，大幅简化了"),a("code",[n._v("pom.xml")]),n._v("的编写。")]),n._v(" "),a("p",[n._v("如果模块A依赖模块B，则模块A需要模块B的jar包才能正常编译，我们需要在模块A中引入模块B：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("    ...\n    <dependencies>\n        <dependency>\n            <groupId>com.itranswarp.learnjava</groupId>\n            <artifactId>module-b</artifactId>\n            <version>1.0</version>\n        </dependency>\n    </dependencies>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br")])]),a("p",[n._v("最后，在编译的时候，需要在根目录创建一个"),a("code",[n._v("pom.xml")]),n._v("统一编译：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<project xmlns="http://maven.apache.org/POM/4.0.0"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">\n\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>com.itranswarp.learnjava</groupId>\n    <artifactId>build</artifactId>\n    <version>1.0</version>\n    <packaging>pom</packaging>\n    <name>build</name>\n\n    <modules>\n        <module>parent</module>\n        <module>module-a</module>\n        <module>module-b</module>\n        <module>module-c</module>\n    </modules>\n</project>\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br")])]),a("p",[n._v("这样，在根目录执行"),a("code",[n._v("mvn clean package")]),n._v("时，Maven根据根目录的"),a("code",[n._v("pom.xml")]),n._v("找到包括"),a("code",[n._v("parent")]),n._v("在内的共4个"),a("code",[n._v("<module>")]),n._v("，一次性全部编译。")]),n._v(" "),a("h3",{attrs:{id:"中央仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#中央仓库"}},[n._v("#")]),n._v(" 中央仓库")]),n._v(" "),a("p",[n._v("其实我们使用的大多数第三方模块都是这个用法，例如，我们使用commons logging、log4j这些第三方模块，就是第三方模块的开发者自己把编译好的jar包发布到Maven的中央仓库中。")]),n._v(" "),a("h3",{attrs:{id:"私有仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#私有仓库"}},[n._v("#")]),n._v(" 私有仓库")]),n._v(" "),a("p",[n._v("私有仓库是指公司内部如果不希望把源码和jar包放到公网上，那么可以搭建私有仓库。私有仓库总是在公司内部使用，它只需要在本地的"),a("code",[n._v("~/.m2/settings.xml")]),n._v("中配置好，使用方式和中央仓位没有任何区别。")]),n._v(" "),a("h3",{attrs:{id:"本地仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地仓库"}},[n._v("#")]),n._v(" 本地仓库")]),n._v(" "),a("p",[n._v("本地仓库是指把本地开发的项目“发布”在本地，这样其他项目可以通过本地仓库引用它。但是我们不推荐把自己的模块安装到Maven的本地仓库，因为每次修改某个模块的源码，都需要重新安装，非常容易出现版本不一致的情况。更好的方法是使用模块化编译，在编译的时候，告诉Maven几个模块之间存在依赖关系，需要一块编译，Maven就会自动按依赖顺序编译这些模块。")]),n._v(" "),a("h2",{attrs:{id:"使用mvnw"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用mvnw"}},[n._v("#")]),n._v(" 使用mvnw:")]),n._v(" "),a("p",[n._v("我们使用Maven时，基本上只会用到"),a("code",[n._v("mvn")]),n._v("这一个命令。有些童鞋可能听说过"),a("code",[n._v("mvnw")]),n._v("，这个是啥？")]),n._v(" "),a("p",[a("code",[n._v("mvnw")]),n._v("是Maven Wrapper的缩写。因为我们安装Maven时，默认情况下，系统所有项目都会使用全局安装的这个Maven版本。但是，对于某些项目来说，它可能必须使用某个特定的Maven版本，这个时候，就可以使用Maven Wrapper，它可以负责给这个特定的项目安装指定版本的Maven，而其他项目不受影响。")]),n._v(" "),a("p",[n._v("简单地说，Maven Wrapper就是给一个项目提供一个独立的，指定版本的Maven给它使用。")]),n._v(" "),a("h3",{attrs:{id:"安装maven-wrapper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装maven-wrapper"}},[n._v("#")]),n._v(" 安装Maven Wrapper")]),n._v(" "),a("p",[n._v("安装Maven Wrapper最简单的方式是在项目的根目录（即"),a("code",[n._v("pom.xml")]),n._v("所在的目录）下运行安装命令：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("mvn -N io.takari:maven:0.7.6:wrapper\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br")])]),a("p",[n._v("它会自动使用最新版本的Maven。注意"),a("code",[n._v("0.7.6")]),n._v("是Maven Wrapper的版本。最新的Maven Wrapper版本可以去"),a("a",{attrs:{href:"https://github.com/takari/maven-wrapper",target:"_blank",rel:"noopener noreferrer"}},[n._v("官方网站"),a("OutboundLink")],1),n._v("查看。")]),n._v(" "),a("p",[n._v("如果要指定使用的Maven版本，使用下面的安装命令指定版本，例如"),a("code",[n._v("3.3.3")]),n._v("：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("mvn -N io.takari:maven:0.7.6:wrapper -Dmaven=3.3.3\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[n._v("安装后，查看项目结构：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("my-project\n├── .mvn\n│   └── wrapper\n│       ├── MavenWrapperDownloader.java\n│       ├── maven-wrapper.jar\n│       └── maven-wrapper.properties\n├── mvnw\n├── mvnw.cmd\n├── pom.xml\n└── src\n    ├── main\n    │   ├── java\n    │   └── resources\n    └── test\n        ├── java\n        └── resources\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br")])]),a("p",[n._v("发现多了"),a("code",[n._v("mvnw")]),n._v("、"),a("code",[n._v("mvnw.cmd")]),n._v("和"),a("code",[n._v(".mvn")]),n._v("目录，我们只需要把"),a("code",[n._v("mvn")]),n._v("命令改成"),a("code",[n._v("mvnw")]),n._v("就可以使用跟项目关联的Maven。例如：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("mvnw cleanpackage\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[n._v("在Linux或macOS下运行时需要加上"),a("code",[n._v("./")]),n._v("：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("./mvnw cleanpackage\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[n._v("Maven Wrapper的另一个作用是把项目的"),a("code",[n._v("mvnw")]),n._v("、"),a("code",[n._v("mvnw.cmd")]),n._v("和"),a("code",[n._v(".mvn")]),n._v("提交到版本库中，可以使所有开发人员使用统一的Maven版本。")]),n._v(" "),a("h2",{attrs:{id:"发布artifact"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布artifact"}},[n._v("#")]),n._v(" 发布Artifact:")]),n._v(" "),a("p",[n._v("当我们使用"),a("code",[n._v("commons-logging")]),n._v("这些第三方开源库的时候，我们实际上是通过Maven自动下载它的jar包，并根据其"),a("code",[n._v("pom.xml")]),n._v("解析依赖，自动把相关依赖包都下载后加入到classpath。")]),n._v(" "),a("p",[n._v("那么问题来了：当我们自己写了一个牛逼的开源库时，非常希望别人也能使用，总不能直接放个jar包的链接让别人下载吧？")]),n._v(" "),a("p",[n._v("如果我们把自己的开源库放到Maven的repo中，那么，别人只需按标准引用"),a("code",[n._v("groupId:artifactId:version")]),n._v("，即可自动下载jar包以及相关依赖。因此，本节我们介绍如何发布一个库到Maven的repo中。")]),n._v(" "),a("p",[n._v("把自己的库发布到Maven的repo中有好几种方法，我们介绍3种最常用的方法。")]),n._v(" "),a("h3",{attrs:{id:"以静态文件发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#以静态文件发布"}},[n._v("#")]),n._v(" 以静态文件发布")]),n._v(" "),a("p",[n._v("如果我们观察一个中央仓库的Artifact结构，例如"),a("a",{attrs:{href:"https://commons.apache.org/proper/commons-math/",target:"_blank",rel:"noopener noreferrer"}},[n._v("Commons Math"),a("OutboundLink")],1),n._v("，它的groupId是"),a("code",[n._v("org.apache.commons")]),n._v("，artifactId是"),a("code",[n._v("commons-math3")]),n._v("，以版本"),a("code",[n._v("3.6.1")]),n._v("为例，发布在中央仓库的文件夹路径就是"),a("a",{attrs:{href:"https://repo1.maven.org/maven2/org/apache/commons/commons-math3/3.6.1/",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://repo1.maven.org/maven2/org/apache/commons/commons-math3/3.6.1/"),a("OutboundLink")],1),n._v("，在此文件夹下，"),a("code",[n._v("commons-math3-3.6.1.jar")]),n._v("就是发布的jar包，"),a("code",[n._v("commons-math3-3.6.1.pom")]),n._v("就是它的"),a("code",[n._v("pom.xml")]),n._v("描述文件，"),a("code",[n._v("commons-math3-3.6.1-sources.jar")]),n._v("是源代码，"),a("code",[n._v("commons-math3-3.6.1-javadoc.jar")]),n._v("是文档。其它以"),a("code",[n._v(".asc")]),n._v("、"),a("code",[n._v(".md5")]),n._v("、"),a("code",[n._v(".sha1")]),n._v("结尾的文件分别是GPG签名、MD5摘要和SHA-1摘要。")]),n._v(" "),a("p",[n._v("我们只要按照这种目录结构组织文件，它就是一个有效的Maven仓库。")]),n._v(" "),a("p",[n._v("我们以广受好评的开源项目"),a("a",{attrs:{href:"https://github.com/michaelliao/how-to-become-rich",target:"_blank",rel:"noopener noreferrer"}},[n._v("how-to-become-rich"),a("OutboundLink")],1),n._v("为例，先创建Maven工程目录结构如下：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("how-to-become-rich\n├── maven-repo        <-- Maven本地文件仓库\n├── pom.xml           <-- 项目文件\n├── src\n│   ├── main\n│   │   ├── java      <-- 源码目录\n│   │   └── resources <-- 资源目录\n│   └── test\n│       ├── java      <-- 测试源码目录\n│       └── resources <-- 测试资源目录\n└── target            <-- 编译输出目录\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br")])]),a("p",[n._v("在"),a("code",[n._v("pom.xml")]),n._v("中添加如下内容：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<project ...>\n    ...\n    <distributionManagement>\n        <repository>\n            <id>local-repo-release</id>\n            <name>GitHub Release</name>\n            <url>file://${project.basedir}/maven-repo</url>\n        </repository>\n    </distributionManagement>\n\n    <build>\n        <plugins>\n            <plugin>\n                <artifactId>maven-source-plugin</artifactId>\n                <executions>\n                    <execution>\n                        <id>attach-sources</id>\n                        <phase>package</phase>\n                        <goals>\n                            <goal>jar-no-fork</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n            <plugin>\n                <artifactId>maven-javadoc-plugin</artifactId>\n                <executions>\n                    <execution>\n                        <id>attach-javadocs</id>\n                        <phase>package</phase>\n                        <goals>\n                            <goal>jar</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br")])]),a("p",[n._v("注意到"),a("code",[n._v("<distributionManagement>")]),n._v("，它指示了发布的软件包的位置，这里的"),a("code",[n._v("<url>")]),n._v("是项目根目录下的"),a("code",[n._v("maven-repo")]),n._v("目录，在"),a("code",[n._v("<build>")]),n._v("中定义的两个插件"),a("code",[n._v("maven-source-plugin")]),n._v("和"),a("code",[n._v("maven-javadoc-plugin")]),n._v("分别用来创建源码和javadoc，如果不想发布源码，可以把对应的插件去掉。")]),n._v(" "),a("p",[n._v("我们直接在项目根目录下运行Maven命令"),a("code",[n._v("mvn clean package deploy")]),n._v("，如果一切顺利，我们就可以在"),a("code",[n._v("maven-repo")]),n._v("目录下找到部署后的所有文件如下：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("maven-repo\n└── com\n    └── itranswarp\n        └── rich\n            └── how-to-become-rich\n                ├── 1.0.0\n                │   ├── how-to-become-rich-1.0.0-javadoc.jar\n                │   ├── how-to-become-rich-1.0.0-javadoc.jar.md5\n                │   ├── how-to-become-rich-1.0.0-javadoc.jar.sha1\n                │   ├── how-to-become-rich-1.0.0-sources.jar\n                │   ├── how-to-become-rich-1.0.0-sources.jar.md5\n                │   ├── how-to-become-rich-1.0.0-sources.jar.sha1\n                │   ├── how-to-become-rich-1.0.0.jar\n                │   ├── how-to-become-rich-1.0.0.jar.md5\n                │   ├── how-to-become-rich-1.0.0.jar.sha1\n                │   ├── how-to-become-rich-1.0.0.pom\n                │   ├── how-to-become-rich-1.0.0.pom.md5\n                │   └── how-to-become-rich-1.0.0.pom.sha1\n                ├── maven-metadata.xml\n                ├── maven-metadata.xml.md5\n                └── maven-metadata.xml.sha1\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br")])]),a("p",[n._v("最后一步，是把这个工程推到GitHub上，并选择"),a("code",[n._v("Settings")]),n._v("-"),a("code",[n._v("GitHub Pages")]),n._v("，选择"),a("code",[n._v("master branch")]),n._v("启用Pages服务：")]),n._v(" "),a("p",[a("img",{attrs:{src:"learn-maven%20eb9d5ffa7bae4b5bb1e0874b7f871af4/Untitled.png",alt:"learn-maven%20eb9d5ffa7bae4b5bb1e0874b7f871af4/Untitled.png"}})]),n._v(" "),a("p",[n._v("这样，把全部内容推送至GitHub后，即可作为静态网站访问Maven的repo，它的地址是"),a("a",{attrs:{href:"https://michaelliao.github.io/how-to-become-rich/maven-repo/",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://michaelliao.github.io/how-to-become-rich/maven-repo/"),a("OutboundLink")],1),n._v("。版本"),a("code",[n._v("1.0.0")]),n._v("对应的jar包地址是：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("https://michaelliao.github.io/how-to-become-rich/maven-repo/com/itranswarp/rich/how-to-become-rich/1.0.0/how-to-become-rich-1.0.0.jar\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br")])]),a("p",[n._v("现在，如果其他人希望引用这个Maven包，我们可以告知如下依赖即可：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<dependency>\n    <groupId>com.itranswarp.rich</groupId>\n    <artifactId>how-to-become-rich</artifactId>\n    <version>1.0.0</version>\n</dependency>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br")])]),a("p",[n._v("但是，除了正常导入依赖外，对方还需要再添加一个"),a("code",[n._v("<repository>")]),n._v("的声明，即使用方完整的"),a("code",[n._v("pom.xml")]),n._v("如下：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<project xmlns="http://maven.apache.org/POM/4.0.0"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>example</groupId>\n    <artifactId>how-to-become-rich-usage</artifactId>\n    <version>1.0-SNAPSHOT</version>\n    <packaging>jar</packaging>\n\n    <properties>\n        <maven.compiler.source>11</maven.compiler.source>\n        <maven.compiler.target>11</maven.compiler.target>\n        <java.version>11</java.version>\n    </properties>\n\n    <repositories>\n        <repository>\n            <id>github-rich-repo</id>\n            <name>The Maven Repository on Github</name>\n            <url>https://michaelliao.github.io/how-to-become-rich/maven-repo/</url>\n        </repository>\n    </repositories>\n\n    <dependencies>\n        <dependency>\n            <groupId>com.itranswarp.rich</groupId>\n            <artifactId>how-to-become-rich</artifactId>\n            <version>1.0.0</version>\n        </dependency>\n    </dependencies>\n</project>\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br")])]),a("p",[n._v("在"),a("code",[n._v("<repository>")]),n._v("中，我们必须声明发布的Maven的repo地址，其中"),a("code",[n._v("<id>")]),n._v("和"),a("code",[n._v("<name>")]),n._v("可以任意填写，"),a("code",[n._v("<url>")]),n._v("填入GitHub Pages提供的地址+"),a("code",[n._v("/maven-repo/")]),n._v("后缀。现在，即可正常引用这个库并编写代码如下：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("Millionaire millionaire =new Millionaire();\nSystem.out.println(millionaire.howToBecomeRich());\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br")])]),a("p",[n._v("有的童鞋会问，为什么使用"),a("code",[n._v("commons-logging")]),n._v("等第三方库时，并不需要声明repo地址？这是因为这些库都是发布到Maven中央仓库的，发布到中央仓库后，不需要告诉Maven仓库地址，因为它知道中央仓库的地址默认是"),a("a",{attrs:{href:"https://repo1.maven.org/maven2/",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://repo1.maven.org/maven2/"),a("OutboundLink")],1),n._v("，也可以通过"),a("code",[n._v("~/.m2/settings.xml")]),n._v("指定一个代理仓库地址以替代中央仓库来提高速度（参考"),a("a",{attrs:{href:"https://www.liaoxuefeng.com/wiki/1252599548343744/1309301178105890",target:"_blank",rel:"noopener noreferrer"}},[n._v("依赖管理"),a("OutboundLink")],1),n._v("的Maven镜像）。")]),n._v(" "),a("p",[n._v("因为GitHub Pages并不会把我们发布的Maven包同步到中央仓库，所以自然使用方必须手动添加一个我们提供的仓库地址。")]),n._v(" "),a("p",[n._v("此外，通过GitHub Pages发布Maven repo时需要注意一点，即不要改动已发布的版本。因为Maven的仓库是不允许修改任何版本的，对一个库进行修改的唯一方法是发布一个新版本。但是通过静态文件的方式发布repo，实际上我们是可以修改jar文件的，但最好遵守规范，不要修改已发布版本。")]),n._v(" "),a("h3",{attrs:{id:"通过nexus发布到中央仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过nexus发布到中央仓库"}},[n._v("#")]),n._v(" 通过Nexus发布到中央仓库")]),n._v(" "),a("p",[n._v("有的童鞋会问，能不能把自己的开源库发布到Maven的中央仓库，这样用户就不需要声明repo地址，可以直接引用，显得更专业。")]),n._v(" "),a("p",[n._v("当然可以，但我们不能直接发布到Maven中央仓库，而是通过曲线救国的方式，发布到"),a("a",{attrs:{href:"https://central.sonatype.org/",target:"_blank",rel:"noopener noreferrer"}},[n._v("central.sonatype.org"),a("OutboundLink")],1),n._v("，它会定期自动同步到Maven的中央仓库。"),a("a",{attrs:{href:"https://www.sonatype.com/nexus-repository-oss",target:"_blank",rel:"noopener noreferrer"}},[n._v("Nexus"),a("OutboundLink")],1),n._v("是一个支持Maven仓库的软件，由Sonatype开发，有免费版和专业版两个版本，很多大公司内部都使用Nexus作为自己的私有Maven仓库，而这个"),a("a",{attrs:{href:"https://central.sonatype.org/",target:"_blank",rel:"noopener noreferrer"}},[n._v("central.sonatype.org"),a("OutboundLink")],1),n._v("相当于面向开源的一个Nexus公共服务。")]),n._v(" "),a("p",[n._v("所以，第一步是在"),a("a",{attrs:{href:"https://central.sonatype.org/",target:"_blank",rel:"noopener noreferrer"}},[n._v("central.sonatype.org"),a("OutboundLink")],1),n._v("上注册一个账号，注册链接非常隐蔽，可以自己先找找，找半小时没找到点这里查看攻略。")]),n._v(" "),a("p",[n._v("如果注册顺利并审核通过，会得到一个登录账号，然后，通过"),a("a",{attrs:{href:"https://central.sonatype.org/pages/apache-maven.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("这个页面"),a("OutboundLink")],1),n._v("一步一步操作就可以成功地将自己的Artifact发布到Nexus上，再耐心等待几个小时后，你的Artifact就会出现在Maven的中央仓库中。")]),n._v(" "),a("p",[n._v("这里简单提一下发布重点与难点：")]),n._v(" "),a("ul",[a("li",[n._v("必须正确创建GPG签名，Linux和Mac下推荐使用gnupg2；")]),n._v(" "),a("li",[n._v("必须在"),a("code",[n._v("~/.m2/settings.xml")]),n._v("中配置好登录用户名和口令，以及GPG口令：")])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<settings ...>\n    ...\n    <servers>\n        <server>\n            <id>ossrh</id>\n            <username>OSSRH-USERNAME</username>\n            <password>OSSRH-PASSWORD</password>\n        </server>\n    </servers>\n    <profiles>\n        <profile>\n            <id>ossrh</id>\n            <activation>\n                <activeByDefault>true</activeByDefault>\n            </activation>\n            <properties>\n                <gpg.executable>gpg2</gpg.executable>\n                <gpg.passphrase>GPG-PASSWORD</gpg.passphrase>\n            </properties>\n        </profile>\n    </profiles>\n</settings>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br")])]),a("p",[n._v("在待发布的Artifact的"),a("code",[n._v("pom.xml")]),n._v("中添加OSS的Maven repo地址，以及"),a("code",[n._v("maven-jar-plugin")]),n._v("、"),a("code",[n._v("maven-source-plugin")]),n._v("、"),a("code",[n._v("maven-javadoc-plugin")]),n._v("、"),a("code",[n._v("maven-gpg-plugin")]),n._v("、"),a("code",[n._v("nexus-staging-maven-plugin")]),n._v("：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<project ...>\n    ...\n    <distributionManagement>\n        <snapshotRepository>\n            <id>ossrh</id>\n            <url>https://oss.sonatype.org/content/repositories/snapshots</url>\n        </snapshotRepository>\n\n        <repository>\n            <id>ossrh</id>\n            <name>Nexus Release Repository</name>\n            <url>http://oss.sonatype.org/service/local/staging/deploy/maven2/</url>\n        </repository>\n    </distributionManagement>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-jar-plugin</artifactId>\n                <executions>\n                    <execution>\n                        <goals>\n                            <goal>jar</goal>\n                            <goal>test-jar</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-source-plugin</artifactId>\n                <executions>\n                    <execution>\n                        <id>attach-sources</id>\n                        <goals>\n                            <goal>jar-no-fork</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-javadoc-plugin</artifactId>\n                <executions>\n                    <execution>\n                        <id>attach-javadocs</id>\n                        <goals>\n                            <goal>jar</goal>\n                        </goals>\n                        <configuration>\n                            <additionalOption>\n                                <additionalOption>-Xdoclint:none</additionalOption>\n                            </additionalOption>\n                        </configuration>\n                    </execution>\n                </executions>\n            </plugin>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-gpg-plugin</artifactId>\n                <executions>\n                    <execution>\n                        <id>sign-artifacts</id>\n                        <phase>verify</phase>\n                        <goals>\n                            <goal>sign</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n            <plugin>\n                <groupId>org.sonatype.plugins</groupId>\n                <artifactId>nexus-staging-maven-plugin</artifactId>\n                <version>1.6.3</version>\n                <extensions>true</extensions>\n                <configuration>\n                    <serverId>ossrh</serverId>\n                    <nexusUrl>https://oss.sonatype.org/</nexusUrl>\n                    <autoReleaseAfterClose>true</autoReleaseAfterClose>\n                </configuration>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br"),a("span",{staticClass:"line-number"},[n._v("55")]),a("br"),a("span",{staticClass:"line-number"},[n._v("56")]),a("br"),a("span",{staticClass:"line-number"},[n._v("57")]),a("br"),a("span",{staticClass:"line-number"},[n._v("58")]),a("br"),a("span",{staticClass:"line-number"},[n._v("59")]),a("br"),a("span",{staticClass:"line-number"},[n._v("60")]),a("br"),a("span",{staticClass:"line-number"},[n._v("61")]),a("br"),a("span",{staticClass:"line-number"},[n._v("62")]),a("br"),a("span",{staticClass:"line-number"},[n._v("63")]),a("br"),a("span",{staticClass:"line-number"},[n._v("64")]),a("br"),a("span",{staticClass:"line-number"},[n._v("65")]),a("br"),a("span",{staticClass:"line-number"},[n._v("66")]),a("br"),a("span",{staticClass:"line-number"},[n._v("67")]),a("br"),a("span",{staticClass:"line-number"},[n._v("68")]),a("br"),a("span",{staticClass:"line-number"},[n._v("69")]),a("br"),a("span",{staticClass:"line-number"},[n._v("70")]),a("br"),a("span",{staticClass:"line-number"},[n._v("71")]),a("br"),a("span",{staticClass:"line-number"},[n._v("72")]),a("br"),a("span",{staticClass:"line-number"},[n._v("73")]),a("br"),a("span",{staticClass:"line-number"},[n._v("74")]),a("br"),a("span",{staticClass:"line-number"},[n._v("75")]),a("br"),a("span",{staticClass:"line-number"},[n._v("76")]),a("br"),a("span",{staticClass:"line-number"},[n._v("77")]),a("br"),a("span",{staticClass:"line-number"},[n._v("78")]),a("br"),a("span",{staticClass:"line-number"},[n._v("79")]),a("br"),a("span",{staticClass:"line-number"},[n._v("80")]),a("br"),a("span",{staticClass:"line-number"},[n._v("81")]),a("br"),a("span",{staticClass:"line-number"},[n._v("82")]),a("br"),a("span",{staticClass:"line-number"},[n._v("83")]),a("br"),a("span",{staticClass:"line-number"},[n._v("84")]),a("br"),a("span",{staticClass:"line-number"},[n._v("85")]),a("br"),a("span",{staticClass:"line-number"},[n._v("86")]),a("br")])]),a("p",[n._v("最后执行命令"),a("code",[n._v("mvn clean package deploy")]),n._v("即可发布至"),a("a",{attrs:{href:"https://central.sonatype.org/",target:"_blank",rel:"noopener noreferrer"}},[n._v("central.sonatype.org"),a("OutboundLink")],1),n._v("。")]),n._v(" "),a("p",[n._v("此方法前期需要复杂的申请账号和项目的流程，后期需要安装调试GPG，但只要跑通流程，后续发布都只需要一行命令。")]),n._v(" "),a("h3",{attrs:{id:"发布到私有仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布到私有仓库"}},[n._v("#")]),n._v(" 发布到私有仓库")]),n._v(" "),a("p",[n._v("通过"),a("code",[n._v("nexus-staging-maven-plugin")]),n._v("除了可以发布到"),a("a",{attrs:{href:"https://central.sonatype.org/",target:"_blank",rel:"noopener noreferrer"}},[n._v("central.sonatype.org"),a("OutboundLink")],1),n._v("外，也可以发布到私有仓库，例如，公司内部自己搭建的Nexus服务器。")]),n._v(" "),a("p",[n._v("如果没有私有Nexus服务器，还可以发布到"),a("a",{attrs:{href:"https://github.com/features/packages",target:"_blank",rel:"noopener noreferrer"}},[n._v("GitHub Packages"),a("OutboundLink")],1),n._v("。GitHub Packages是GitHub提供的仓库服务，支持Maven、NPM、Docker等。使用GitHub Packages时，无论是发布Artifact，还是引用已发布的Artifact，都需要明确的授权Token，因此，GitHub Packages只能作为私有仓库使用。")]),n._v(" "),a("p",[n._v("在发布前，我们必须首先登录后在用户的"),a("code",[n._v("Settings")]),n._v("-"),a("code",[n._v("Developer settings")]),n._v("-"),a("code",[n._v("Personal access tokens")]),n._v("中创建两个Token，一个用于发布，一个用于使用。发布Artifact的Token必须有"),a("code",[n._v("repo")]),n._v("、"),a("code",[n._v("write:packages")]),n._v("和"),a("code",[n._v("read:packages")]),n._v("权限：")]),n._v(" "),a("p",[a("a",{attrs:{href:"https://www.liaoxuefeng.com/files/attachments/1347999282233410/l",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://www.liaoxuefeng.com/files/attachments/1347999282233410/l"),a("OutboundLink")],1)]),n._v(" "),a("p",[n._v("使用Artifact的Token只需要"),a("code",[n._v("read:packages")]),n._v("权限。")]),n._v(" "),a("p",[n._v("在发布端，把GitHub的用户名和发布Token写入"),a("code",[n._v("~/.m2/settings.xml")]),n._v("配置中：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<settings ...>\n    ...\n    <servers>\n        <server>\n            <id>github-release</id>\n            <username>GITHUB-USERNAME</username>\n            <password>f052...c21f</password>\n        </server>\n    </servers>\n</settings>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br")])]),a("p",[n._v("然后，在需要发布的Artifact的"),a("code",[n._v("pom.xml")]),n._v("中，添加一个"),a("code",[n._v("<repository>")]),n._v("声明：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<project ...>\n    ...\n    <distributionManagement>\n        <repository>\n            <id>github-release</id>\n            <name>GitHub Release</name>\n            <url>https://maven.pkg.github.com/michaelliao/complex</url>\n        </repository>\n    </distributionManagement>\n</project>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br")])]),a("p",[n._v("注意到"),a("code",[n._v("<id>")]),n._v("和"),a("code",[n._v("~/.m2/settings.xml")]),n._v("配置中的"),a("code",[n._v("<id>")]),n._v("要保持一致，因为发布时Maven根据id找到用于登录的用户名和Token，才能成功上传文件到GitHub。我们直接通过命令"),a("code",[n._v("mvn clean package deploy")]),n._v("部署，成功后，在GitHub用户页面可以看到该Artifact：")]),n._v(" "),a("p",[a("a",{attrs:{href:"https://www.liaoxuefeng.com/files/attachments/1348000710393922/l",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://www.liaoxuefeng.com/files/attachments/1348000710393922/l"),a("OutboundLink")],1)]),n._v(" "),a("p",[n._v("完整的配置请参考"),a("a",{attrs:{href:"https://github.com/michaelliao/complex/",target:"_blank",rel:"noopener noreferrer"}},[n._v("complex"),a("OutboundLink")],1),n._v("项目，这是一个非常简单的支持复数运算的库。")]),n._v(" "),a("p",[n._v("使用该Artifact时，因为GitHub的Package只能作为私有仓库使用，所以除了在使用方的"),a("code",[n._v("pom.xml")]),n._v("中声明"),a("code",[n._v("<repository>")]),n._v("外：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("<project ...>\n    ...\n    <repositories>\n        <repository>\n            <id>github-release</id>\n            <name>GitHub Release</name>\n            <url>https://maven.pkg.github.com/michaelliao/complex</url>\n        </repository>\n    </repositories>\n\n    <dependencies>\n        <dependency>\n            <groupId>com.itranswarp</groupId>\n            <artifactId>complex</artifactId>\n            <version>1.0.0</version>\n        </dependency>\n    </dependencies>\n    ...\n</project>\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br")])]),a("p",[n._v("还需要把有读权限的Token配置到"),a("code",[n._v("~/.m2/settings.xml")]),n._v("文件中。")])])}),[],!1,null,null,null);s.default=r.exports}}]);